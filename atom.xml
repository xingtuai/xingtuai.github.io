<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Kylin&#39;s Blog</title>
  
  <subtitle>A Lonely Programmer</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://dkylin.com/"/>
  <updated>2017-06-23T01:00:38.000Z</updated>
  <id>http://dkylin.com/</id>
  
  <author>
    <name>Kylin</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>python实现密码字典生成器</title>
    <link href="http://dkylin.com/archives/2017/password-dict-generate.html"/>
    <id>http://dkylin.com/archives/2017/password-dict-generate.html</id>
    <published>2017-06-22T08:15:33.000Z</published>
    <updated>2017-06-23T01:00:38.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ooo.0o0.ooo/2017/06/22/594b7ebaa85fd.png" alt="python.png"></p><p>人生苦短，我用Python!</p><p>Python是一门非常简洁、强大的编程语言，可以用来解决生活工作中的很多问题。现在Python也越来越受欢迎。在本篇博客中将聊一聊如何使用Python生成密码字典。</p><a id="more"></a><h2 id="前提要求"><a href="#前提要求" class="headerlink" title="前提要求"></a>前提要求</h2><ol><li>Python 3.6 （对于python2.7应该同样有效，未测试）</li><li>PyCharm编辑器或者任一编辑器（vi、sublime均可）</li></ol><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p>先上完整代码，后面再一一解析。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># coding: utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">@ author: Kylin</span></span><br><span class="line"><span class="string">@ function: 密码字典生成器</span></span><br><span class="line"><span class="string">@ date: 2017/6/22</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> itertools <span class="keyword">as</span> itr</span><br><span class="line"></span><br><span class="line">words = <span class="string">"abcdefghijklmnopqrstuvwxyz1234567890"</span></span><br><span class="line">dict_file = <span class="string">"dict.txt"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DictorGenerate</span><span class="params">()</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, minLength, maxLength)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> maxLength &gt; minLength:</span><br><span class="line">            self.minLength = minLength</span><br><span class="line">            self.maxLength = maxLength</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.minLength = maxLength</span><br><span class="line">            self.maxLength = minLength</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">generate</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># 如果文件存在则删除</span></span><br><span class="line">        <span class="keyword">if</span> os.path.isfile(dict_file):</span><br><span class="line">            os.remove(dict_file)</span><br><span class="line"></span><br><span class="line">        dic = open(dict_file, <span class="string">"a"</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(self.minLength, self.maxLength + <span class="number">1</span>):</span><br><span class="line">            r = itr.product(words, repeat=i)</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> r:</span><br><span class="line">                dic.write(<span class="string">"%s\n"</span> % <span class="string">""</span>.join(i))</span><br><span class="line"></span><br><span class="line">        dic.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    print(<span class="string">"开始生成密码字典......"</span>)</span><br><span class="line">    param_len = len(sys.argv[<span class="number">1</span>:])</span><br><span class="line">    param = str(sys.argv[<span class="number">1</span>:])</span><br><span class="line">    param = param.replace(<span class="string">"'"</span>, <span class="string">""</span>).replace(<span class="string">"["</span>, <span class="string">""</span>).replace(<span class="string">"]"</span>, <span class="string">""</span>)</span><br><span class="line"></span><br><span class="line">    params = param.split(<span class="string">","</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">if</span> param_len == <span class="number">2</span>:</span><br><span class="line">            min = int(params[<span class="number">0</span>])</span><br><span class="line">            max = int(params[<span class="number">1</span>])</span><br><span class="line">        <span class="keyword">elif</span> param_len == <span class="number">0</span>:</span><br><span class="line">            min = <span class="number">3</span></span><br><span class="line">            max = <span class="number">4</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">"\nError:\n\n    仅能输入两个数字,例如:\n\n    python DictGenerate.py 3 6"</span>)</span><br><span class="line">            sys.exit(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">except</span> ValueError <span class="keyword">as</span> e:</span><br><span class="line">        print(<span class="string">"\nError:\n\n    参数只能输入数字,例如:\n\n    python DictGenerate.py 3 6"</span>)</span><br><span class="line">        sys.exit(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    dg = DictorGenerate(min, max)</span><br><span class="line">    dg.generate()</span><br><span class="line">    print(<span class="string">"生成密码字典成功......"</span>)</span><br></pre></td></tr></table></figure><p>参数<code>words</code>是你生成密码所需要的字符，我这里因为个人需要所以并不完整，没有加入大写字母以及特殊字符，你可以根据自己的需要去添加。</p><p>参数<code>dict_file</code>是最终生成出来的密码字典文件。</p><p>类<code>DictorGenerate()</code>的作用就是生成字典了。先来分析这个类：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, minLength, maxLength)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> maxLength &gt; minLength:</span><br><span class="line">        self.minLength = minLength</span><br><span class="line">        self.maxLength = maxLength</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        self.minLength = maxLength</span><br><span class="line">        self.maxLength = minLength</span><br></pre></td></tr></table></figure><p><code>__init__</code>方法是初始化方法，传入两个参数，分别是<code>minLength(最小长度)</code>和<code>maxLength(最大长度)</code>，在这里初始化生成的密码的长度范围。</p><h2 id="生成密码字典"><a href="#生成密码字典" class="headerlink" title="生成密码字典"></a>生成密码字典</h2><p>主要的密码生成函数是<code>generate(self)</code>,主要是使用了<code>itertools.product()</code>函数</p><h2 id="源代码下载"><a href="#源代码下载" class="headerlink" title="源代码下载"></a>源代码下载</h2><p><a href="https://gist.github.com/71a733df831f0f955d87114f8996ef2a" target="_blank" rel="noopener">源代码下载：DictGenerate.py</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/06/22/594b7ebaa85fd.png&quot; alt=&quot;python.png&quot;&gt;&lt;/p&gt;&lt;p&gt;人生苦短，我用Python!&lt;/p&gt;&lt;p&gt;Python是一门非常简洁、强大的编程语言，可以用来解决生活工作中的很多问题。现在Python也越来越受欢迎。在本篇博客中将聊一聊如何使用Python生成密码字典。&lt;/p&gt;
    
    </summary>
    
      <category term="python" scheme="http://dkylin.com/categories/python/"/>
    
    
      <category term="python" scheme="http://dkylin.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot系列之Log4j2的配置使用</title>
    <link href="http://dkylin.com/archives/2017/spring-boot-log4j2-config.html"/>
    <id>http://dkylin.com/archives/2017/spring-boot-log4j2-config.html</id>
    <published>2017-05-11T06:27:23.000Z</published>
    <updated>2017-05-11T08:54:08.000Z</updated>
    
    <content type="html"><![CDATA[<p>后台程序开发及上线时，一般都会用到Log信息打印及Log日志记录，开发时通过Log信息打印可以快速的定位问题所在，帮助我们快捷开发。程序上线后如遇到Bug或错误，此时则需要日志记录来查找发现问题所在。</p><p>Spring Boot 可以集成很多不同的日志系统，其中最常用的Apache Log4j，而Log4j 2是Log4j的升级版本，Log4j 2相对于Log4j 1.x 有了很多显著的改善。所以这篇博客就直接来说说Spring Boot如何集成并配置使用Log4j2.</p><a id="more"></a><h2 id="1-导入Log4j2的包"><a href="#1-导入Log4j2的包" class="headerlink" title="1. 导入Log4j2的包"></a>1. 导入Log4j2的包</h2><p>如果你使用Gradle，则在<code>build.gradle</code>文件中添加以下依赖。示例代码中使用的是Gradle方式。</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="comment">// log4j2 </span></span><br><span class="line">    <span class="keyword">compile</span> <span class="string">"org.apache.logging.log4j:log4j-api:2.8"</span></span><br><span class="line">    <span class="keyword">compile</span> <span class="string">"org.apache.logging.log4j:log4j-core:2.8"</span></span><br><span class="line">    <span class="comment">// 用来支持Logger中的Async</span></span><br><span class="line">    <span class="keyword">compile</span> <span class="string">'com.lmax:disruptor:3.3.6'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果你使用Maven，则在<code>pom.xml</code>文件中添加以下依赖。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.lmax<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>disruptor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="2-添加log4j2配置文件"><a href="#2-添加log4j2配置文件" class="headerlink" title="2. 添加log4j2配置文件"></a>2. 添加log4j2配置文件</h2><p>在项目的resources资源文件根目录下创建<code>log4j2.xml</code>文件并复制以下代码到文件中。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Configuration后面的status，这个用于设置log4j2自身内部的信息输出，可以不设置，当设置成trace时，</span></span><br><span class="line"><span class="comment"> 你会看到log4j2内部各种详细输出。可以设置成OFF(关闭)或Error(只输出错误信息)</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Configuration</span> <span class="attr">status</span>=<span class="string">"OFF"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 日志文件目录和压缩文件目录配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Property</span> <span class="attr">name</span>=<span class="string">"fileName"</span>&gt;</span>/home/kylin/log/knight/spring_log<span class="tag">&lt;/<span class="name">Property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Property</span> <span class="attr">name</span>=<span class="string">"fileGz"</span>&gt;</span>/home/kylin/log/knight/spring_log/7z<span class="tag">&lt;/<span class="name">Property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Appenders</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 输出控制台日志的配置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Console</span> <span class="attr">name</span>=<span class="string">"console"</span> <span class="attr">target</span>=<span class="string">"SYSTEM_OUT"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--控制台只输出level及以上级别的信息（onMatch），其他的直接拒绝（onMismatch）--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"info"</span> <span class="attr">onMatch</span>=<span class="string">"ACCEPT"</span> <span class="attr">onMismatch</span>=<span class="string">"DENY"</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 输出日志的格式 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"%d&#123;HH:mm:ss.SSS&#125; [%t] %-5level %logger&#123;36&#125; - %msg%n"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Console</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 打印出所有的信息，每次大小超过size，则这size大小的日志会自动存入按年份-月份建立的文件夹下面并进行压缩，作为存档 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RollingRandomAccessFile</span> <span class="attr">name</span>=<span class="string">"infoFile"</span> <span class="attr">fileName</span>=<span class="string">"$&#123;fileName&#125;/web-info.log"</span> <span class="attr">immediateFlush</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">                                 <span class="attr">filePattern</span>=<span class="string">"$&#123;fileGz&#125;/$$&#123;date:yyyy-MM&#125;/app-%d&#123;MM-dd-yyyy&#125;-%i.web-info.gz"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"%d&#123;yyyy-MM-dd 'at' HH:mm:ss z&#125; [%t] %-5level %logger&#123;36&#125; %L %M - %msg%xEx%n"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">TimeBasedTriggeringPolicy</span> <span class="attr">interval</span>=<span class="string">"6"</span> <span class="attr">modulate</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">"50 MB"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Filters</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 只记录info和warn级别信息 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"error"</span> <span class="attr">onMatch</span>=<span class="string">"DENY"</span> <span class="attr">onMismatch</span>=<span class="string">"NEUTRAL"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"info"</span> <span class="attr">onMatch</span>=<span class="string">"ACCEPT"</span> <span class="attr">onMismatch</span>=<span class="string">"DENY"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Filters</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 指定每天的最大压缩包个数，默认7个，超过了会覆盖之前的 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">DefaultRolloverStrategy</span> <span class="attr">max</span>=<span class="string">"50"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RollingRandomAccessFile</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 存储所有error信息 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">RollingRandomAccessFile</span> <span class="attr">name</span>=<span class="string">"errorFile"</span> <span class="attr">fileName</span>=<span class="string">"$&#123;fileName&#125;/web-error.log"</span> <span class="attr">immediateFlush</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">                                 <span class="attr">filePattern</span>=<span class="string">"$&#123;fileGz&#125;/$$&#123;date:yyyy-MM&#125;/app-%d&#123;MM-dd-yyyy&#125;-%i.web-error.gz"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">"%d&#123;yyyy-MM-dd 'at' HH:mm:ss z&#125; [%t] %-5level %logger&#123;36&#125; %L %M - %msg%xEx%n"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Policies</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">TimeBasedTriggeringPolicy</span> <span class="attr">interval</span>=<span class="string">"6"</span> <span class="attr">modulate</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">"50 MB"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Filters</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 只记录error级别信息 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ThresholdFilter</span> <span class="attr">level</span>=<span class="string">"error"</span> <span class="attr">onMatch</span>=<span class="string">"ACCEPT"</span> <span class="attr">onMismatch</span>=<span class="string">"DENY"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Filters</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 指定每天的最大压缩包个数，默认7个，超过了会覆盖之前的 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">DefaultRolloverStrategy</span> <span class="attr">max</span>=<span class="string">"50"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RollingRandomAccessFile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Appenders</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 全局配置，默认所有的Logger都继承此配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Loggers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- AsyncRoot - 异步记录日志 - 需要LMAX Disruptor的支持 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">AsyncRoot</span> <span class="attr">level</span>=<span class="string">"info"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">"console"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">"infoFile"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">"errorFile"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">AsyncRoot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Loggers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="3-编写Log4j2辅助类"><a href="#3-编写Log4j2辅助类" class="headerlink" title="3. 编写Log4j2辅助类"></a>3. 编写Log4j2辅助类</h2><p>做好以上的配置之后，我们可以编写一个辅助类，让我们更方便的使用Log4j2来记录日志。</p><p>在utils包中创建<code>L.java</code>类文件。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.spring.log4j2.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.logging.log4j.LogManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.logging.log4j.Logger;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Logger 日志记录辅助类</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * Created by Kylin on 2017/5/11.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">L</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger LOGGER = LogManager.getLogger();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">L</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">/* cannot be instantiated */</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException(<span class="string">"cannot be instantiated"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Logger <span class="title">getLogger</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> LOGGER;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">t</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        LOGGER.trace(msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">d</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        LOGGER.debug(msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">i</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        LOGGER.info(msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">w</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        LOGGER.warn(msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">e</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        LOGGER.error(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编写完辅助类，使用起来就很简单了，通过下面的代码就可以轻松使用。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">()</span></span>&#123;</span><br><span class="line">        String msg = <span class="string">"Spring Boot系列之Log4j2的配置及使用"</span>;</span><br><span class="line">        L.t(msg);</span><br><span class="line">        L.d(msg);</span><br><span class="line">        L.i(msg);</span><br><span class="line">        L.w(msg);</span><br><span class="line">        L.e(msg);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里的辅助类只是写了一些基本的使用方法，你可以根据你的需求进行定制，增加更多的辅助方法。对于辅助类中没有提供的方法也可以使用<code>L.getLogger()</code>方法获取Logger实例来使用。</p><h2 id="4-结果验证"><a href="#4-结果验证" class="headerlink" title="4. 结果验证"></a>4. 结果验证</h2><p>日志的Level分级：TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATAL。</p><p>因为我的log4j2中的level设置的是<code>INFO</code>级别。所以打印信息中只能看到 <code>INFO</code> 、<code>WARN</code> 、 <code>ERROR</code> 三种级别(FATAL级别的信息没有打印，否则也可以看到)。</p><p>打印信息如下图所示：</p><p><img src="https://ooo.0o0.ooo/2017/05/11/59141c76b8b07.png" alt="Log Info"></p><p>同时在电脑系统中生成了Log文件，如下图所示：</p><p><img src="https://ooo.0o0.ooo/2017/05/11/59141ce1be407.png" alt="log file"></p><p>观察路径可以发现，这个路径正是在<code>Log4j2.xml</code>中设置的路径：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 日志文件目录和压缩文件目录配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Property</span> <span class="attr">name</span>=<span class="string">"fileName"</span>&gt;</span>/home/kylin/log/knight/spring_log<span class="tag">&lt;/<span class="name">Property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Property</span> <span class="attr">name</span>=<span class="string">"fileGz"</span>&gt;</span>/home/kylin/log/knight/spring_log/7z<span class="tag">&lt;/<span class="name">Property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Properties</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="5-更多"><a href="#5-更多" class="headerlink" title="5. 更多"></a>5. 更多</h2><p>Log4j2的Github地址：<a href="https://github.com/apache/logging-log4j2" target="_blank" rel="noopener">https://github.com/apache/logging-log4j2</a></p><p>本教程的示例代码地址：<a href="https://github.com/dkylin/SpringBoot-Sample/tree/master/SpringBoot-log4j2" target="_blank" rel="noopener">https://github.com/dkylin/SpringBoot-Sample/tree/master/SpringBoot-log4j2</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;后台程序开发及上线时，一般都会用到Log信息打印及Log日志记录，开发时通过Log信息打印可以快速的定位问题所在，帮助我们快捷开发。程序上线后如遇到Bug或错误，此时则需要日志记录来查找发现问题所在。&lt;/p&gt;&lt;p&gt;Spring Boot 可以集成很多不同的日志系统，其中最常用的Apache Log4j，而Log4j 2是Log4j的升级版本，Log4j 2相对于Log4j 1.x 有了很多显著的改善。所以这篇博客就直接来说说Spring Boot如何集成并配置使用Log4j2.&lt;/p&gt;
    
    </summary>
    
      <category term="Spring Boot" scheme="http://dkylin.com/categories/Spring-Boot/"/>
    
    
      <category term="Spring Boot" scheme="http://dkylin.com/tags/Spring-Boot/"/>
    
      <category term="log4j" scheme="http://dkylin.com/tags/log4j/"/>
    
      <category term="Spring" scheme="http://dkylin.com/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>JQuery实现定时刷新</title>
    <link href="http://dkylin.com/archives/2017/web-jquery-timed-refresh.html"/>
    <id>http://dkylin.com/archives/2017/web-jquery-timed-refresh.html</id>
    <published>2017-05-09T03:27:23.000Z</published>
    <updated>2017-05-09T06:42:34.000Z</updated>
    
    <content type="html"><![CDATA[<p>在网页开发中，经常会需要不断的刷新某个页面或某个局部数据。这时候就需要用到定时刷新来实现了。实现方式就是使用JS setInterval函数每隔一段时间请求一次数据，然后将请求结果返回给前端HTML实现刷新。</p><a id="more"></a><p>实现代码如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        getData();</span><br><span class="line">        setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            getData();</span><br><span class="line">        &#125;, <span class="number">3000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        $.getJSON(<span class="string">"/blood/pressure/1"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="number">200</span> == data.code) &#123;</span><br><span class="line">                $(<span class="string">"#systolic"</span>).text(data.data.systolic);</span><br><span class="line">                $(<span class="string">"#diastolic"</span>).text(data.data.diastolic);</span><br><span class="line">                $(<span class="string">"#pulse"</span>).text(data.data.pulse);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><p>代码解释：</p><h2 id="1-导入jquery"><a href="#1-导入jquery" class="headerlink" title="1. 导入jquery"></a>1. 导入jquery</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>使用上面的语句导入JQuery库，下面的代码需要JQuery库的支持。</p><h2 id="2-页面加载完启动程序"><a href="#2-页面加载完启动程序" class="headerlink" title="2. 页面加载完启动程序"></a>2. 页面加载完启动程序</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    getData(); <span class="comment">// 第一次加载数据</span></span><br><span class="line">    <span class="comment">// 开启定时任务，时间间隔为3000 ms。</span></span><br><span class="line">    setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        getData();</span><br><span class="line">    &#125;, <span class="number">3000</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>一般定时任务需要在页面加载完成之后就启动。页面加载完成有两种事件，一是ready，表示文档结构已经加载完成（不包含图片等非文字媒体文件），二是onload，指示页 面包含图片等文件在内的所有元素都加载完成(可以说：ready 在onload 前触发)。</p><p>建议在ready时就执行定时任务，使用下面的代码实现：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// do sometion</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>上面的代码等价于：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </span><br><span class="line">    <span class="comment">//do something  </span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="3-获取数据并刷新页面"><a href="#3-获取数据并刷新页面" class="headerlink" title="3. 获取数据并刷新页面"></a>3. 获取数据并刷新页面</h2><p>使用下面的代码获取数据并设置页面相应的值。从而刷新页面数据。这个步骤根据自己的需求写相应的代码。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $.getJSON(<span class="string">"/blood/pressure/1"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">200</span> == data.code) &#123;</span><br><span class="line">            $(<span class="string">"#systolic"</span>).text(data.data.systolic);</span><br><span class="line">            $(<span class="string">"#diastolic"</span>).text(data.data.diastolic);</span><br><span class="line">            $(<span class="string">"#pulse"</span>).text(data.data.pulse);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在网页开发中，经常会需要不断的刷新某个页面或某个局部数据。这时候就需要用到定时刷新来实现了。实现方式就是使用JS setInterval函数每隔一段时间请求一次数据，然后将请求结果返回给前端HTML实现刷新。&lt;/p&gt;
    
    </summary>
    
      <category term="Web" scheme="http://dkylin.com/categories/Web/"/>
    
    
      <category term="Web" scheme="http://dkylin.com/tags/Web/"/>
    
      <category term="JQuery" scheme="http://dkylin.com/tags/JQuery/"/>
    
      <category term="Ajax" scheme="http://dkylin.com/tags/Ajax/"/>
    
  </entry>
  
  <entry>
    <title>Bluetooth系列之Bluetooth基础</title>
    <link href="http://dkylin.com/archives/2017/android_ble_base.html"/>
    <id>http://dkylin.com/archives/2017/android_ble_base.html</id>
    <published>2017-04-01T08:19:00.000Z</published>
    <updated>2017-04-01T09:34:44.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ooo.0o0.ooo/2017/04/01/58df6378ab39a.png" alt="Bluetooth.png"></p><p>博主刚换了工作，目前从事物联网方面的Android开发，第一个项目研发的内容就跟蓝牙（Bluetooth）有关，主要是针对蓝牙4.0，又被称作低功耗蓝牙（Bluetooth Low Energy）做研发。不得不说，这方面的资料真的很少，博主在开发过程中遇到了各种各样的问题，也花费了很多的精力去解决。所以打算将其作为一个系列去写，将研发中的技术和遇到的问题以及解决的方案记录下来。</p><a id="more"></a><h2 id="一、-蓝牙简介"><a href="#一、-蓝牙简介" class="headerlink" title="一、 蓝牙简介"></a>一、 蓝牙简介</h2><p>说到蓝牙，大家肯定不会陌生，蓝牙的版本历史从99年发布的1.0版本，到后来07年发布的2.1版本（所谓的经典蓝牙），也是大部分产品使用的版本。再到所谓的高速蓝牙，也就是蓝牙3.0，最高速度可达24Mbps，是2.0速度的8倍。然后就是今天的主题，蓝牙4.0了，蓝牙4.0是Bluetooth SIG（蓝牙技术联盟）与10年7月7日推出的新的规范。其最重要的特性是支持省电。所以我们也称之为低功耗蓝牙。</p><p>科技的发展迅猛无比，时至今日，蓝牙已经于2016年6月推出蓝牙5，其有效传输距离将是4.0低功耗蓝牙的4倍（理论上可达300米），传输速度将是4.2低功耗版本的2倍（速度上限为24Mbps）。同时针对物联网进行了很多底层优化。</p><blockquote><p>Bluetooth History:<br>v1.0 -&gt; v2.0 -&gt; v2.1 -&gt; v3.0 -&gt; v4.0 -&gt; v4.1 -&gt; v4.2 -&gt; v5.0</p></blockquote><h2 id="二、-Bluetooth-Low-Energy"><a href="#二、-Bluetooth-Low-Energy" class="headerlink" title="二、 Bluetooth Low Energy"></a>二、 Bluetooth Low Energy</h2><p>低功耗蓝牙，全称Bluetooth Low Energy，简称BLE。<a href="https://developer.android.com/guide/topics/connectivity/bluetooth-le.html" target="_blank" rel="noopener">Android官方网站</a>中针对BLE的开发有相关的开发文档，开发者们可查阅相关内容。</p><h3 id="1-关键名词及解释"><a href="#1-关键名词及解释" class="headerlink" title="1. 关键名词及解释"></a>1. 关键名词及解释</h3><ul><li><strong>Attribute Protocol (ATT)</strong> - ATT全称叫做属性协议，它是BLE通信的基础。ATT把数据进行封装，向外暴露为“属性”。ATT是专门为BLE设计的，结构简单，数据长度很短。每一个属性都通过Universally Unique Identifier (UUID)进行唯一标识，UUID是128位的值。</li><li><strong>Generic Attribute Profile (GATT)</strong> - GATT全称叫做通用属性配置文件，GATT是构建于ATT之上。以ATT为基础，对ATT进行进一步的封装，定义数据的交互方式及含义。也是我们做开发时直接接触的东西。</li><li><strong>Service</strong> - 一个Service里面包含了多个Characteristic。</li><li><strong>Characteristic</strong> - 一个Characteristic里面包含了一个单一的数值和多个用来描述Characteristic的descriptor。Characteristic的操作有几种权限：读、写和通知。</li><li><strong>Descriptor</strong> - Descriptor被定义为描述Characteristic数值的属性。</li></ul><blockquote><p>未完待续…</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/04/01/58df6378ab39a.png&quot; alt=&quot;Bluetooth.png&quot;&gt;&lt;/p&gt;&lt;p&gt;博主刚换了工作，目前从事物联网方面的Android开发，第一个项目研发的内容就跟蓝牙（Bluetooth）有关，主要是针对蓝牙4.0，又被称作低功耗蓝牙（Bluetooth Low Energy）做研发。不得不说，这方面的资料真的很少，博主在开发过程中遇到了各种各样的问题，也花费了很多的精力去解决。所以打算将其作为一个系列去写，将研发中的技术和遇到的问题以及解决的方案记录下来。&lt;/p&gt;
    
    </summary>
    
      <category term="Bluetooth" scheme="http://dkylin.com/categories/Bluetooth/"/>
    
    
      <category term="Android" scheme="http://dkylin.com/tags/Android/"/>
    
      <category term="项目实践" scheme="http://dkylin.com/tags/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/"/>
    
      <category term="Bluetooth" scheme="http://dkylin.com/tags/Bluetooth/"/>
    
  </entry>
  
  <entry>
    <title>Android实践系列之Activity管理器</title>
    <link href="http://dkylin.com/archives/2016/android-activity-manager.html"/>
    <id>http://dkylin.com/archives/2016/android-activity-manager.html</id>
    <published>2016-07-14T08:28:47.000Z</published>
    <updated>2017-04-01T03:51:52.000Z</updated>
    
    <content type="html"><![CDATA[<p>上一篇文章：<a href="https://dkylin.com/archives/2016/android-base-config.html">Android实践系列之项目基础配置</a></p><p>在进行Android开发的时候，我们需要对Activity进行各种操作，各种跳转。如果不对这些Activity进行有效的管理，将会出现各种我们不希望看见的结果。此时我们需要一个Activity管理器帮助我们有效的管理Activity。</p><a id="more"></a><h2 id="1-创建Activity管理器"><a href="#1-创建Activity管理器" class="headerlink" title="1. 创建Activity管理器"></a>1. 创建Activity管理器</h2><p>创建一个MyActivityManager类对Activity进行管理。代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Activity管理器</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Created by Kylin on 2016-07-14.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyActivityManager</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;Activity&gt; activityList = <span class="keyword">new</span> ArrayList&lt;Activity&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> MyActivityManager instance;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> MyActivityManager <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">            instance = <span class="keyword">new</span> MyActivityManager();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加 Activity 到列表</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> activity activity</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">addActivity</span><span class="params">(Activity activity)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(activityList == <span class="keyword">null</span>)&#123;</span><br><span class="line">            activityList = <span class="keyword">new</span> ArrayList&lt;Activity&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        activityList.add(activity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取界面数量</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> activity size</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getActivitySize</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(activityList != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> activityList.size();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取当前 Activity - 堆栈中最后一个压入的</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> current Activity</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Activity <span class="title">getCurrentActivity</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(activityList != <span class="keyword">null</span> &amp;&amp; activityList.size() &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            Activity activity = activityList.get(activityList.size()-<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">return</span> activity;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取指定类名的 Activity</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> cls 指定的类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Activity</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Activity <span class="title">getActivity</span><span class="params">(Class&lt;?&gt; cls)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(activityList == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (Activity activity : activityList) &#123;</span><br><span class="line">            <span class="keyword">if</span>(activity.getClass().equals(cls))&#123;</span><br><span class="line">                <span class="keyword">return</span> activity;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 结束指定的 Activity</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> activity Activity</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">removeActivity</span><span class="params">(Activity activity)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(activity != <span class="keyword">null</span>)&#123;</span><br><span class="line">            activityList.remove(activity);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 结束指定类名的 Activity</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> cls 指定的类</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">removeActivity</span><span class="params">(Class&lt;?&gt; cls)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(activityList == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (Activity activity : activityList) &#123;</span><br><span class="line">            <span class="keyword">if</span>(activity.getClass().equals(cls))&#123;</span><br><span class="line">                activityList.remove(activity);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 结束所有Activity</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">finishAllActivity</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(activityList == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> size = activityList.size();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">null</span> != activityList.get(i))&#123;</span><br><span class="line">                activityList.get(i).finish();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        activityList.clear();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 结束其他所有的Activity</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> activity 不需要销毁的Activity</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">finishOtherAllActivity</span><span class="params">(Activity activity)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(activityList == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, size = activityList.size(); i &lt; size; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (activity != activityList.get(i))&#123;</span><br><span class="line">                activityList.get(i).finish();</span><br><span class="line">                activityList.remove(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-创建BaseActivity"><a href="#2-创建BaseActivity" class="headerlink" title="2. 创建BaseActivity"></a>2. 创建BaseActivity</h2><p>现在有了Activity管理器，但是我不想再每个界面都需要把Activity添加到列表中，在每次销毁的时候再将其移除，太麻烦了。那么现在我们来写一个BaseActivity，把操作放在这里。这样让所有的Activity继承BaseActivity就可以了。代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * BaseActivity</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Created by Kylin on 2016-07-14.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        MyActivityManager.addActivity(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        MyActivityManager.removeActivity(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样只需要每个Activity继承这个BaseActivity就可以了。在Activity onCreate()的时候将Activity添加到全局的列表中。在onDestroy()的时候将其移除就可以了。</p><h2 id="3-优雅的退出程序"><a href="#3-优雅的退出程序" class="headerlink" title="3. 优雅的退出程序"></a>3. 优雅的退出程序</h2><p>在主界面以及登录界面，有时按返回键是需要退出应用的，这时我们可以使用MyActivityManager里面的finishAllActivity()方法销毁所有界面，退出应用。代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onKeyDown</span><span class="params">(<span class="keyword">int</span> keyCode, KeyEvent event)</span> </span>&#123;</span><br><span class="line">     <span class="keyword">if</span> (keyCode == KeyEvent.KEYCODE_BACK &amp;&amp; event.getAction() == KeyEvent.ACTION_DOWN) &#123;</span><br><span class="line">         <span class="comment">//两秒之内按返回键就会退出</span></span><br><span class="line">         <span class="keyword">if</span> ((System.currentTimeMillis() - exitTime) &gt; <span class="number">2000</span>) &#123;</span><br><span class="line">             T.showShort(<span class="keyword">this</span>, <span class="string">"再按一次退出程序"</span>);</span><br><span class="line">             exitTime = System.currentTimeMillis();</span><br><span class="line">         &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">             MyActivityManager.finishAllActivity();</span><br><span class="line"><span class="comment">//           System.exit(0); // Kill当前应用的进程,不建议使用.</span></span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">super</span>.onKeyDown(keyCode, event);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h2 id="4-FragmentActivity中使用"><a href="#4-FragmentActivity中使用" class="headerlink" title="4. FragmentActivity中使用"></a>4. FragmentActivity中使用</h2><p>在FragmentActivity中使用可以创建一个BaseFragmentActivity。也可以在FragmentActivity中直接使用。方法与上面相同，不再赘述。</p><h2 id="5-其他用法"><a href="#5-其他用法" class="headerlink" title="5. 其他用法"></a>5. 其他用法</h2><ul><li>finishOtherAllActivity()：除了指定的界面销毁其他所有界面</li><li>getCurrentActivity()：获取当前界面</li><li>getActivitySize()：获取栈中Activity的数量</li></ul><h2 id="6-结语"><a href="#6-结语" class="headerlink" title="6. 结语"></a>6. 结语</h2><p>源代码已上传Github，在Github上可以查看。</p><p>Github地址：<a href="https://github.com/dkylin/AndroidDemo/tree/ActivityManager" target="_blank" rel="noopener">https://github.com/dkylin/AndroidDemo/tree/ActivityManager</a></p><p>目前我的项目中用的就是这种方式，可以很方便的管理Activity。还在等什么，快来试试吧！</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;上一篇文章：&lt;a href=&quot;https://dkylin.com/archives/2016/android-base-config.html&quot;&gt;Android实践系列之项目基础配置&lt;/a&gt;&lt;/p&gt;&lt;p&gt;在进行Android开发的时候，我们需要对Activity进行各种操作，各种跳转。如果不对这些Activity进行有效的管理，将会出现各种我们不希望看见的结果。此时我们需要一个Activity管理器帮助我们有效的管理Activity。&lt;/p&gt;
    
    </summary>
    
      <category term="Android" scheme="http://dkylin.com/categories/Android/"/>
    
    
      <category term="Android" scheme="http://dkylin.com/tags/Android/"/>
    
      <category term="Activity" scheme="http://dkylin.com/tags/Activity/"/>
    
      <category term="项目实践" scheme="http://dkylin.com/tags/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/"/>
    
  </entry>
  
  <entry>
    <title>Android实践系列之项目基础配置</title>
    <link href="http://dkylin.com/archives/2016/android-base-config.html"/>
    <id>http://dkylin.com/archives/2016/android-base-config.html</id>
    <published>2016-07-14T05:28:39.000Z</published>
    <updated>2017-04-01T03:51:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>最近想要写一个Android的实践开发项目，一来可以把自己学习的新技术、新知识加以实践；二来可以将自己以往的技术点加以整理，总结，优化；三来希望可以与更多的人分享，交流Android知识与技术。</p><p>这个【Android实践系列】将会作为一个系列去写，其中将会涉及到我以往的技术总结，还将会把我学习的新技术应用到项目中。</p><a id="more"></a><h2 id="一、项目介绍"><a href="#一、项目介绍" class="headerlink" title="一、项目介绍"></a>一、项目介绍</h2><ul><li>项目名：AndroidDemo</li><li>开发环境：Android Studio 2.1.2</li><li>最小SDK版本：9</li><li>目标SDK版本：23</li><li>Github地址：<a href="https://github.com/dkylin/AndroidDemo" target="_blank" rel="noopener">https://github.com/dkylin/AndroidDemo</a></li></ul><h2 id="二、基础配置"><a href="#二、基础配置" class="headerlink" title="二、基础配置"></a>二、基础配置</h2><p>在进行项目的开发之前，需要先加入一些第三方开源库的依赖。接下来将会一一进行介绍。</p><h3 id="2-1-RxJava"><a href="#2-1-RxJava" class="headerlink" title="2.1 RxJava"></a>2.1 <a href="https://github.com/ReactiveX/RxJava" target="_blank" rel="noopener">RxJava</a></h3><p>想要添加RxJava到你的项目中，只需要在文件<code>app/build.gradle</code>中添加如下依赖：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    // RxJava</span><br><span class="line">    compile &apos;io.reactivex:rxjava:1.1.3&apos;</span><br><span class="line">    compile &apos;io.reactivex:rxandroid:1.1.0&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>添加RxAndroid是为了Android中的线程问题。添加完毕之后点击<code>Sync Now</code>同步一下就OK了。</p><p>RxJava的本质可以概括为<code>异步</code>两个字。那么同为异步，它的优势又有哪些呢？也是两个字：<code>简洁</code>。这里的简洁不是指代码的简洁，而是逻辑上的简洁。如果想知道更多关于RxJava的信息，请自行查找资料，在此不再赘述。</p><ul><li>RxJava的Github地址:<a href="https://github.com/ReactiveX/RxJava" target="_blank" rel="noopener">https://github.com/ReactiveX/RxJava</a></li><li>推荐一篇介绍RxJava的文章：<a href="http://gank.io/post/560e15be2dca930e00da1083" target="_blank" rel="noopener">给 Android 开发者的 RxJava 详解</a>。</li></ul><h3 id="2-2-Retrofit"><a href="#2-2-Retrofit" class="headerlink" title="2.2 Retrofit"></a>2.2 <a href="http://square.github.io/retrofit/" target="_blank" rel="noopener">Retrofit</a></h3><p>如果你后台的接口符合RESTful API规范，那么使用RxJava + Retrofit 完全可以打出成吨的伤害，简直不要太酸爽。</p><p>将Retrofit添加到项目中只需要在<code>app/build.gradle</code>加入如下依赖：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    // Retrofit &amp; adapter-rxjava &amp; converter-gson(三个版本需要相同)</span><br><span class="line">    compile &apos;com.squareup.retrofit2:retrofit:2.0.2&apos;</span><br><span class="line">    compile &apos;com.squareup.retrofit2:converter-gson:2.0.2&apos;</span><br><span class="line">    compile &apos;com.squareup.retrofit2:adapter-rxjava:2.0.2&apos;</span><br><span class="line">    compile &apos;com.google.code.gson:gson:2.6.2&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在添加Retrofit开源库的同时需要添加adapter-rxjava与RxJava结合，添加gson库的支持，用于解析json数据。Retrofit 2.0已经将OkHttp集成进去了，所以就不需要单独导入OkHttp了。</p><ul><li>Retrofit官网：<a href="http://square.github.io/retrofit/" target="_blank" rel="noopener">http://square.github.io/retrofit/</a></li><li>Github地址：<a href="https://github.com/square/retrofit" target="_blank" rel="noopener">https://github.com/square/retrofit</a></li><li>推荐文章：<a href="http://gank.io/post/56e80c2c677659311bed9841" target="_blank" rel="noopener">RxJava与Retrofit结合的最佳实践</a></li></ul><h3 id="2-3-Glide"><a href="#2-3-Glide" class="headerlink" title="2.3 Glide"></a>2.3 <a href="https://github.com/bumptech/glide" target="_blank" rel="noopener">Glide</a></h3><p>Glide是一个图片加载库，一个使用非常简单的图片加载库，使用方便，功能强大。</p><p>将Glide添加到项目中只需要在<code>app/build.gradle</code>加入如下依赖：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    // Glide图片加载库</span><br><span class="line">    compile &apos;com.github.bumptech.glide:glide:3.7.0&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Github地址：<a href="https://github.com/bumptech/glide" target="_blank" rel="noopener">https://github.com/bumptech/glide</a></li><li>推荐文章：<a href="http://stackoverflow.com/questions/29363321/picasso-v-s-imageloader-v-s-fresco-vs-glide" target="_blank" rel="noopener">Picasso vs Imageloader vs Fresco vs Glide</a></li></ul><h3 id="2-4-ButterKnife"><a href="#2-4-ButterKnife" class="headerlink" title="2.4 ButterKnife"></a>2.4 <a href="https://github.com/JakeWharton/butterknife" target="_blank" rel="noopener">ButterKnife</a></h3><p>ButterKnife是使用注解的方式帮助开发者绑定View组件，让开发者不需要再写一大串的findViewById。配合Android studio插件<a href="https://github.com/avast/android-butterknife-zelezny" target="_blank" rel="noopener">android-butterknife-zelezny</a>使用简直不要太棒！不多说，自己去感受！！！</p><p>将Glide添加到项目中首先需要在项目级的<code>build.gradle</code>中添加：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">  repositories &#123;</span><br><span class="line"> jcenter()</span><br><span class="line">  &#125;</span><br><span class="line"> dependencies &#123;</span><br><span class="line">   // 添加APT，用于自动生成代码</span><br><span class="line">   classpath &apos;com.neenbedankt.gradle.plugins:android-apt:1.8&apos;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后在<code>app/build.gradle</code>加入如下依赖：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: &apos;android-apt&apos;</span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line">dependencies &#123;</span><br><span class="line">  // ButterKnife</span><br><span class="line">  compile &apos;com.jakewharton:butterknife:8.2.1&apos;</span><br><span class="line">  apt &apos;com.jakewharton:butterknife-compiler:8.2.1&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Github地址：<a href="https://github.com/JakeWharton/butterknife" target="_blank" rel="noopener">https://github.com/JakeWharton/butterknife</a></li></ul><h3 id="2-5-Logger"><a href="#2-5-Logger" class="headerlink" title="2.5 Logger"></a>2.5 <a href="https://github.com/orhanobut/logger" target="_blank" rel="noopener">Logger</a></h3><p>Logger是一个非常好用的日志工具。使用也非常简单，在此不再赘述。在<code>app/build.gradle</code>加入如下依赖：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    // Logger</span><br><span class="line">    compile &apos;com.orhanobut:logger:1.15&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Github地址：<a href="https://github.com/orhanobut/logger" target="_blank" rel="noopener">https://github.com/orhanobut/logger</a></li></ul><h3 id="2-6-LeakCanary"><a href="#2-6-LeakCanary" class="headerlink" title="2.6 LeakCanary"></a>2.6 <a href="https://github.com/square/leakcanary" target="_blank" rel="noopener">LeakCanary</a></h3><p>LeakCanary是很常用的一个内存泄漏检测工具，使用非常简单，可以很好的检测出应用的内存泄漏。在<code>app/build.gradle</code>加入如下依赖：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    // LeakCanary内存泄漏检测</span><br><span class="line">    debugCompile &apos;com.squareup.leakcanary:leakcanary-android:1.4-beta2&apos;</span><br><span class="line">    releaseCompile &apos;com.squareup.leakcanary:leakcanary-android-no-op:1.4-beta2&apos;</span><br><span class="line">    testCompile &apos;com.squareup.leakcanary:leakcanary-android-no-op:1.4-beta2&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Github地址：<a href="https://github.com/square/leakcanary" target="_blank" rel="noopener">https://github.com/square/leakcanary</a></p><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>本文仅是介绍了项目中所使用的一些开源库以及简单的介绍。在后面的文章将会对这些开源库的使用进行详细的介绍。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近想要写一个Android的实践开发项目，一来可以把自己学习的新技术、新知识加以实践；二来可以将自己以往的技术点加以整理，总结，优化；三来希望可以与更多的人分享，交流Android知识与技术。&lt;/p&gt;&lt;p&gt;这个【Android实践系列】将会作为一个系列去写，其中将会涉及到我以往的技术总结，还将会把我学习的新技术应用到项目中。&lt;/p&gt;
    
    </summary>
    
      <category term="Android" scheme="http://dkylin.com/categories/Android/"/>
    
    
      <category term="Android" scheme="http://dkylin.com/tags/Android/"/>
    
      <category term="项目实践" scheme="http://dkylin.com/tags/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/"/>
    
  </entry>
  
  <entry>
    <title>Git系列之Github基础设置及使用详解</title>
    <link href="http://dkylin.com/archives/2016/git-github-base-usage.html"/>
    <id>http://dkylin.com/archives/2016/git-github-base-usage.html</id>
    <published>2016-07-06T08:00:14.000Z</published>
    <updated>2017-12-29T09:16:44.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ooo.0o0.ooo/2017/04/01/58df23fe561be.jpg" alt="github"></p><p>在上一篇博客<a href="http://dkylin.com/archives/2016/git-github-base.html"><strong>Git系列之初识Git与Github</strong></a>中详细介绍了Git以及Github分别是什么，以及两者之间的关系。接下来本系列教程将带你一步一步的学习Git以及Github的详细用法。本篇博客将教你如何加入Github，并进行初步的配置及使用。</p><a id="more"></a><h2 id="一、加入Github"><a href="#一、加入Github" class="headerlink" title="一、加入Github"></a>一、加入Github</h2><p><a href="https://github.com" target="_blank" rel="noopener"><strong>Github</strong></a>的优秀在<a href="http://dkylin.com/archives/2016/git-github-base.html">上一篇</a>博客中已经说得很详细了，如果想了解的话请自行去看上一篇博客：<a href="http://dkylin.com/archives/2016/git-github-base.html"><strong>Git系列之初识Git与Github</strong></a>。下面请跟着我的脚步一起加入Github大军吧，<strong>Come On</strong>。</p><h3 id="1-1-注册账号"><a href="#1-1-注册账号" class="headerlink" title="1.1 注册账号"></a>1.1 注册账号</h3><p>想要加入Github，首先你需要注册Github的账号，打开<a href="https://github.com" target="_blank" rel="noopener">Github网站主页:https://github.com</a>，然后你会看到下面的注册界面。</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image/git/github-register.png" alt="Github-Register-step-1"></p><p>根据提示依次填入：你的用户名、你的E-mail地址、你的账号密码。输入完成之后点击<code>Sign up for Github</code>按钮注册即可。注意你的用户名和E-mail必须是没有被注册过的才可以。如果提示错误请换个用户名或者E-mail再重新注册即可。</p><blockquote><p>这里有个小小的提示，很多人在注册账号的时候可能为了方便就乱输用户名，比如：sadasdsdfg120。这种用户名难以记忆并且看着很不舒服。所以建议使用你的英文名，或者有意义的单词。而且建议你的其他平台都使用相同的名字，这样的话辨识度会比较高，你可以打开<a href="http://dkylin.com/about/">我的博客-关于</a>界面，观察我各个平台的用户名，除了被人抢先注册的，其他的我都用了容易记忆并且统一的名字。</p></blockquote><p>这一步成功之后，会跳转到注册的第二步，如下图所示。这时Github已经向你的邮箱中发送了一封验证邮件，进入你的邮箱点击验证即可。</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image/git/github-register-2.png" alt="Github-Register-step-2"></p><p>如上图所示，这一步主要是让你选择一个个人计划，我们直接使用默认的免费的就可以了。下面有一个选择框是提示你可以在下一步创建一个organization(组织)的。这个可以不选择，直接点击<code>Finish sign up</code>按钮完成注册即可。完成之后会出现下面的界面。</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image/git/github-register-finish.png" alt="Github-Register-Finish"></p><p>看到这个就说明你已经注册成功了。你可以选择<code>Read the guide</code>按钮去看一下Github官方为新人写的引导文档，或者点击<code>Start a project</code>去创建一个开始一个项目，创建一个仓库。再或者点击界面右上角你的头像-&gt;<code>Your profiles</code>进入你的主页。</p><h3 id="1-2-Github界面介绍"><a href="#1-2-Github界面介绍" class="headerlink" title="1.2 Github界面介绍"></a>1.2 Github界面介绍</h3><p>到此我们已经成功注册了Github账号，以后就可以轻松+愉快的使用Github了。那么新人可能会对Github比较陌生，对界面中的各种功能、按钮不清楚。那么接下来我会对此一一解释。先来看张图：</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image/git/github-profiles-init.png" alt="Github-Profiles"></p><p>这是新注册用户的界面，在图中我标记的比较详细，下面一一解释(下面的编号对应图中的编号)。</p><ol><li>进入Github主页的按钮;</li><li>搜索框，你可以在这里搜索一些开源项目;</li><li>你的头像，可以在设置里面进行设置;</li><li>你的昵称(账号名称)，你可以在设置中设置你的昵称;</li><li>提示用户添加一个类似于个人描述或个性签名的东西;</li><li>这是你加入Github的时间;</li><li>这有三个数据，Followers:追随(关注)你的人;Starred:你Star(点赞)的项目;Following:你追随(关注)的人;</li><li>Pull requests:简单地说就是别人向你的仓库提交合并请求，后面会详细说;</li><li>Issues:这就是别人对你的项目提的问题;</li><li>Gist:代码片段，后面会详细说;</li><li>这是系统给你的提示消息，提示你去编辑自己的资料;</li><li>你每天的贡献度;</li><li>你的项目仓库;</li><li>你平时活动，或是动态，比如在哪个项目做了提交等;</li><li>这是你每天向Github提交的贡献的分布图;</li><li>由于这是新账户，还没有贡献，所以贴出了一个官方对于贡献的解释，帮助新手理解;</li><li>这是一个创建新仓库或新组织的按钮，点击按钮会弹出菜单，下面会详细讲解;</li><li>这是跟用户相关的一个按钮，点击之后也会有一个跟用户相关的菜单，下面会详细讲解。</li></ol><h2 id="二、Github的配置"><a href="#二、Github的配置" class="headerlink" title="二、Github的配置"></a>二、Github的配置</h2><p>到这里，我们已经创建好了一个Github账户，并且详细的了解了Github个人主页中的布局以及详细信息。那么现在我们来学习一下如何对Github进行一些简单的设置。</p><p>点击<code>1.2章节图片</code>中的<code>编号18</code>的按钮，然后选择菜单下方的<code>Settings</code>进入你的<code>设置界面</code>。</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image/git/personal_settings.png" alt="Personal Settings"></p><h3 id="2-1-Profile-个人简介"><a href="#2-1-Profile-个人简介" class="headerlink" title="2.1 Profile - 个人简介"></a>2.1 Profile - 个人简介</h3><p>进入设置界面之后，首先引入眼帘的是<code>Profile(个人简介)</code>页面。在页面右侧是具体需要设置的一些信息。设置内容如下：</p><ol><li>Profile picture：头像设置，点击<code>Upload new picture</code>按钮进行头像上传更新即可;</li><li>Name：你的昵称或姓名，有别于登录用户名，这仅用来显示，类似于QQ昵称;</li><li>Public email：设置公开邮箱，可以选择你注册的邮箱，也可以不设置;</li><li>Bio：个人简介，Tell a little about yourself.也可以@一些人或组织;</li><li>URL：个人主页地址，或其他网络地址;</li><li>Company：你的公司;</li><li>Location：你的位置或地址。</li></ol><p>设置完上面的信息之后，点击<code>Upload profile</code>按钮更新个人信息。</p><p>在下面还有三个小块：</p><ol><li>Contributions：关于Contribution(贡献)的设置，可以设置把私人仓库的贡献显示在我的主页，然而我们用的都是免费的账户，是没有私人仓库的。所以可以无视。</li><li>Github Developer Program：如果你想开发一些应用、工具之类的集成到Github，可以加入Github开发组。</li><li>Jobs profile：勾选<code>Available for hire</code>选项，表示你是可被招聘的，有工作会联系你。</li></ol><h3 id="2-2-Account-账号设置"><a href="#2-2-Account-账号设置" class="headerlink" title="2.2 Account - 账号设置"></a>2.2 Account - 账号设置</h3><ol><li>Change password：修改你的登录密码，如果忘记密码可以点击<code>I forgot my password</code>重置;</li><li>Change username：修改你的用户名，这是可用于登录的用户名，而不是之前的昵称;</li><li>Delete account：删除账号，请不要作死去尝试。</li></ol><h3 id="2-3-Emails"><a href="#2-3-Emails" class="headerlink" title="2.3 Emails"></a>2.3 Emails</h3><p>Github需要你设置一个Primary的邮箱(主邮箱)，以便给你发送一些通知。Github会默认将你注册时的邮箱作为主邮箱，如果你想修改的话可以添加一个邮箱，然后设置为主邮箱。</p><p>Github默认邮箱都是public，即公开的，你可以勾选<code>Keep my email address private</code>选项修改为private(私有的)。不过如果你想使用私有邮箱进行命令行操作的话就需要在Git中设置你的邮箱。具体的操作方法官方给了链接，可以点击查看。</p><p>Email preferences：邮件偏好设置，第一个选项是发送所有邮件给我，包括我没有订阅的。第二个选项是仅发送跟我账号相关的和我订阅的邮件。</p><h3 id="2-4-Notifications-通知"><a href="#2-4-Notifications-通知" class="headerlink" title="2.4 Notifications - 通知"></a>2.4 Notifications - 通知</h3><p>这里主要是设置Github给你发送通知或者消息的方式。</p><p>How you receive notifications</p><ul><li>Automatic watching：当你获得了一个仓库的push权限时，会自动发送通知给你。在下方可以设置自动关注。</li><li>Participating：如果你参与的项目有新的消息，或者有人@你了就会发消息给你，可以选择邮件或者网页通知两种方式。</li><li>Watching：如果你关注的项目有更新的话会通知你，可以选择邮件或者网页通知两种方式。</li></ul><p>Notification email</p><ul><li>Primary email address：设置主邮箱，通知将发送到这个邮箱;</li><li>Settings：设置需要通知你的事件。</li></ul><h3 id="2-5-其他设置"><a href="#2-5-其他设置" class="headerlink" title="2.5 其他设置"></a>2.5 其他设置</h3><p>新手使用Github基本上设置上面的内容就可以了，下面的设置暂时不会用到。后面的教程中会在用到的时候进行详细的讲解。下面对其他的设置进行简单的介绍：</p><ol><li>Billing：如果想要更好的服务，可以在这里花钱购买相应的服务。</li><li>SSH and GPG keys：设置SSH跟GPG密钥的地方，如果你想用SSH工具连接到你的Github的话，需要在这里设置你的SSH公钥，这个会在后面的教程中详细说明。</li><li>Security：顾名思义，安全方面的设置，可以在里面开启双重认证，查看当前那些主机登录了你的Github账号，查看登录记录。</li><li>OAuth applications：这是用来查看你的Github绑定了那些第三方的应用的。</li><li>Personal access tokens：如果你想使用Github API进行一些开发的话，需要在这里生成API Token。</li><li>Repositories：对仓库的一些设置。</li><li>Organizations：对组织的一些设置。</li><li>Saved replies：被保存的回复在这里可以看到。</li></ol><h2 id="三、Github的基本使用"><a href="#三、Github的基本使用" class="headerlink" title="三、Github的基本使用"></a>三、Github的基本使用</h2><p>创建完账号并且进行了基本的设置之后，我们就可以愉快的使用Github进行代码管理了。下面来看一下Github的基本使用方法。</p><h3 id="3-1-创建仓库"><a href="#3-1-创建仓库" class="headerlink" title="3.1 创建仓库"></a>3.1 创建仓库</h3><p>点击1.2章节图片中的<code>编号17</code>的按钮，可以看到有三个选项：New repository(创建仓库)、Import repository(导入仓库)和New organization(创建组织)。点击<code>New repository</code>选项创建一个新的仓库。</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image/git/Create_new_repository.png" alt="Create New Repository"></p><p>如上图所示是创建新仓库的界面，输入仓库名称，然后系统会检测是否重名，如果已经有重名的仓库则无法创建，需要修改仓库名才可。仓库名输入完成之后，可以在下面输入对仓库的描述。</p><p>在描述的下方可以选择仓库是公开的还是私有的，但是对于免费账户来说是没有私有仓库的。所以一般都是默认公开。如果需要私有仓库，则可以在2.5章节中的<code>Billing</code>设置中付费开启私有仓库的权限。</p><p>然后是<code>Initialize this repository with a README</code>选项，默认是不勾选的，不勾选的状态下将会创建一个空仓库。如果勾选的话则会创建一个仓库，仓库中会有一个<code>README.md</code>文件。当你配置好之后，点击按钮<code>Create repository</code>即可创建一个新的仓库。</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image/git/new_repository.png" alt="New Repository"></p><p>在上图中我们可以看到一个仓库的完整界面，在这个界面中有很多的功能，在此就不一一说明了，后面会专门写一篇文章来详细介绍这些功能。</p><h3 id="3-2-文件操作"><a href="#3-2-文件操作" class="headerlink" title="3.2 文件操作"></a>3.2 文件操作</h3><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image/git/File_operation.png" alt="File Operation"></p><p>在界面中间，你可以看到如上图所示的操作面板，主要功能如下：</p><ol><li>Create new file：创建新文件，点击按钮之后可以创建一个新文件并进行文件编辑，编辑完成后保存提交就可以把新文件保存在仓库中了。</li><li>Upload files：上传文件，点击按钮之后进入上传文件的界面，选择你想要上传的文件即可将文件上传到仓库中。</li><li>Find file：寻找文件，当你的仓库中有很多文件的时候，你可以使用这个功能快速的查找文件。</li><li>Clone or download：克隆或下载仓库，点击按钮之后可以弹出一个面板，可以复制仓库地址进行克隆，或者选择<code>Download ZIP</code>，系统将把仓库中所有文件打包成ZIP压缩文件并下载到本地。</li></ol><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>本篇文章详细的介绍了如何加入Github，并对Github进行基础的设置，最后介绍了一些基础的操作。</p><p>由于文章篇幅有限，而Github又是如此的博大精深，所以在本篇文章中可能无法面面俱到。在之后的系列文章中，我会对Github(包括Git)进行更加全面，更加深入的介绍。</p><blockquote><p>如果你在阅读本文中遇到了理解不了的地方或者认为有错误的地方，请在下方评论，我会及时进行解答或修改。</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/04/01/58df23fe561be.jpg&quot; alt=&quot;github&quot;&gt;&lt;/p&gt;&lt;p&gt;在上一篇博客&lt;a href=&quot;http://dkylin.com/archives/2016/git-github-base.html&quot;&gt;&lt;strong&gt;Git系列之初识Git与Github&lt;/strong&gt;&lt;/a&gt;中详细介绍了Git以及Github分别是什么，以及两者之间的关系。接下来本系列教程将带你一步一步的学习Git以及Github的详细用法。本篇博客将教你如何加入Github，并进行初步的配置及使用。&lt;/p&gt;
    
    </summary>
    
      <category term="Git" scheme="http://dkylin.com/categories/Git/"/>
    
    
      <category term="Git" scheme="http://dkylin.com/tags/Git/"/>
    
      <category term="Github" scheme="http://dkylin.com/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>Git系列之初识Git与Github</title>
    <link href="http://dkylin.com/archives/2016/git-github-base.html"/>
    <id>http://dkylin.com/archives/2016/git-github-base.html</id>
    <published>2016-05-29T15:02:35.000Z</published>
    <updated>2016-07-31T14:53:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>最近好多朋友跟我说想让我写一些关于Github以及Git的使用教程，其实之前写过一篇<a href="http://dkylin.com/archives/2016/git-base-usage-summary.html">Git基础用法详解</a>，不过由于篇幅有限，所以可能有一些地方没有讲的很清楚。而且关于Github的使用也没有过多涉及,由于Git以及Github的知识也的确不少，所以我决定把Git作为一个系列去写，尽量把我会的东西全都分享给大家。</p><a id="more"></a><h2 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h2><p>大家可能都听说过Git以及Github的大名，并且我认为Git以及Github是每一个程序员必备的技能。那么什么是Git，什么又是Github，他们之间又存在着什么联系呢？那么在这一篇博客中，我将带领大家一起来见识一下Git以及Github的庐山真面目。</p><h2 id="二、Git"><a href="#二、Git" class="headerlink" title="二、Git"></a>二、<a href="http://git-scm.com" target="_blank" rel="noopener">Git</a></h2><h3 id="2-1-Git简介"><a href="#2-1-Git简介" class="headerlink" title="2.1 Git简介"></a>2.1 Git简介</h3><p>咱们先来了解一下什么是<a href="http://git-scm.com" target="_blank" rel="noopener">Git</a>？</p><p><a href="http://git-scm.com" target="_blank" rel="noopener">Git官网</a>中对Git的介绍如下：</p><blockquote><p>Git is a free and open source distributed version control system designed to handle everything from small to very large projects with speed and efficiency.</p></blockquote><p>这段话翻译过来其实就是：</p><blockquote><p>Git是一个免费并且开源的分布式版本控制系统，被设计用来快速、高效的管理一切从小到大的项目。</p></blockquote><p>由此我们可以发现Git的几个特性：</p><blockquote><p>分布式<br>快速<br>高效</p></blockquote><p>然而这也正是它与传统的SVN这类集中式版本控制系统的区别所在。</p><h3 id="2-2-集中式VS分布式"><a href="#2-2-集中式VS分布式" class="headerlink" title="2.2 集中式VS分布式"></a>2.2 集中式VS分布式</h3><p>那么什么是集中式版本控制系统，什么又是分布式版本控制系统呢？这两者又有什么区别呢？</p><p>首先先说集中式版本控制系统，它的版本库是存放在中央服务器，但是开发人员用的都是自己的电脑，所以在干活之前，开发人员需要先从中央服务器获取最新的代码，然后才可以工作。工作完了，再把新代码传到中央服务器去。</p><p>它最大的缺点就是必须联网才可以干活，没网就可以回家睡觉了。而且如果网速慢的话，你想要把代码从服务器下载下来或者提交代码到服务器都会非常慢。</p><p>那么分布式版本控制系统又有何不同呢？首先所谓的分布式版本控制系统，没有所谓的“中央服务器”一说，因为每一台电脑上都有一个完整的版本库，每一台电脑理论上都可以是“中央服务器”。因为每一台电脑都有一个完整的版本库，所以工作时并不需要联网。如果是团队协作的话，只需要把修改的文件推送给对方即可。</p><p>那么有的人会说，既然如此，为何还有Git服务器？其实这个服务器只是非常稳定，24小时开机，为了方便团队之间不同的人交换大家的修改而已。没有它一样可以正常的工作，而集中式便不行。所以在安全性上也是分布式的更好，如果某一台电脑坏了，只需要拷贝一份版本库即可。而集中式的服务器如果出了故障那就是很大的问题了。</p><p>当然Git相比于SVN这种集中式版本控制系统，并不仅有这一点优势，Git强大的分支管理，快速、高效的处理，便捷的使用，这些优势在我的教程中你会慢慢感受到！</p><h2 id="三、Github"><a href="#三、Github" class="headerlink" title="三、Github"></a>三、<a href="https://github.com" target="_blank" rel="noopener">Github</a></h2><h3 id="3-1-Github简介"><a href="#3-1-Github简介" class="headerlink" title="3.1 Github简介"></a>3.1 Github简介</h3><p>引用WIKI中对Github的介绍：</p><blockquote><p>GitHub是一个利用Git进行版本控制、专门用于存放软件代码与内容的共享虚拟主机服务。它由GitHub公司（曾称Logical Awesome）的开发者Chris Wanstrath、PJ Hyett和Tom Preston-Werner使用Ruby on Rails编写而成。</p></blockquote><p><a href="https://github.com" target="_blank" rel="noopener">Github社区 - https://github.com</a>,也就是我们常说的Github网站。它于2007年10月1日开始开发，网站于2008年2月以Beta版本开始上线，4月份正式上线。从此它成为了全球最大的开源社区，无数优秀的开源代码在这里存放，无数的技术人才在这里汇聚。所以作为一个程序员，Github是必备的技能，这里将是你最好的学习殿堂！</p><h3 id="3-2-为什么推荐Github"><a href="#3-2-为什么推荐Github" class="headerlink" title="3.2 为什么推荐Github"></a>3.2 为什么推荐Github</h3><p>上面说了Github是全球最大的开源社区，这并不是胡乱吹捧。</p><ul><li>截止到2015年，GitHub已经有超过九百万注册用户和2110万代码仓库。</li><li>全球顶级科技公司纷纷加入Github，如<a href="https://github.com/google" target="_blank" rel="noopener">Google</a>、<a href="https://github.com/facebook" target="_blank" rel="noopener">Facebook</a>、<a href="https://github.com/twitter" target="_blank" rel="noopener">Twitter</a>、<a href="https://github.com/square" target="_blank" rel="noopener">Square</a>、<a href="https://github.com/microsoft" target="_blank" rel="noopener">微软</a>、<a href="https://github.com/apple" target="_blank" rel="noopener">苹果</a>等等。</li><li>全球顶级的开源项目纷纷优先在此开源，如<a href="https://github.com/torvalds/linux" target="_blank" rel="noopener">Linux</a>、<a href="https://github.com/nodejs/node" target="_blank" rel="noopener">Nodejs</a>、<a href="https://github.com/ruby/ruby" target="_blank" rel="noopener">Ruby</a>、<a href="https://github.com/rails/rails" target="_blank" rel="noopener">Rails</a>、<a href="https://github.com/apple/swift" target="_blank" rel="noopener">Swift</a>等等。</li><li>全球顶级的编程大牛纷纷加入Github，如<a href="https://github.com/torvalds" target="_blank" rel="noopener">Linux之父:Linus Torvalds</a>、<a href="https://github.com/JakeWharton" target="_blank" rel="noopener">Android之神:JakeWharton</a>等等。</li></ul><p>由此可见，为什么我会推荐Github，为什么我会说Github是一个程序员必备的技能，为什么这里是你最好的学习殿堂！</p><h3 id="3-3-网络封锁事件"><a href="#3-3-网络封锁事件" class="headerlink" title="3.3 网络封锁事件"></a>3.3 网络封锁事件</h3><p>在中国，2013年1月20日，中国大陆政府的防火长城(GFW)利用域名污染和关键词过滤等手段封锁GitHub，令中国大陆的用户无法直接进入。针对政府对GitHub的封锁行动，李开复先生在新浪微博抗议，迅速引起网民的关注，该消息更在三小时内被转发逾3万2千次。2013年1月23日，GitHub被解封，事件平息。</p><p>后来，Gist又被防火长城封锁，但GitHub其他服务未受影响。</p><p>这次的网络封锁事件多亏了李开复先生的挺身而出，才使得如此优秀的开源社区可以在国内正常访问，我觉得大家有必要知道这件事情，并感谢李开复先生对中国的计算机事业所做出的巨大贡献。</p><h2 id="四、Git-and-Github"><a href="#四、Git-and-Github" class="headerlink" title="四、Git and Github"></a>四、Git and Github</h2><p>在分别了解了Git以及Github是什么了之后，很多人可能还有一个疑问，那么就是这两者之间是什么关系？</p><p>有些人可能认为Git就是Github，其实这是一个错误的观念。</p><p>在上面的介绍中也说了，Github是利用Git来进行版本控制的。所以Git对于Github来说只是一个用来管理项目的工具。Github的功能远远不止于此。</p><p>关于Github的功能，用法，以及Git工具的安装及使用我会在下面的教程中详细说明。</p><blockquote><p><strong>PS：</strong>如果大家在阅读我的博客过程中有什么看不懂的，看不明白的可以在文章下面评论，我会做一些相应的修改或者解释。</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近好多朋友跟我说想让我写一些关于Github以及Git的使用教程，其实之前写过一篇&lt;a href=&quot;http://dkylin.com/archives/2016/git-base-usage-summary.html&quot;&gt;Git基础用法详解&lt;/a&gt;，不过由于篇幅有限，所以可能有一些地方没有讲的很清楚。而且关于Github的使用也没有过多涉及,由于Git以及Github的知识也的确不少，所以我决定把Git作为一个系列去写，尽量把我会的东西全都分享给大家。&lt;/p&gt;
    
    </summary>
    
      <category term="Git" scheme="http://dkylin.com/categories/Git/"/>
    
    
      <category term="Git" scheme="http://dkylin.com/tags/Git/"/>
    
      <category term="Github" scheme="http://dkylin.com/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>科学上网</title>
    <link href="http://dkylin.com/archives/2016/science-online-used-lantern.html"/>
    <id>http://dkylin.com/archives/2016/science-online-used-lantern.html</id>
    <published>2016-05-16T12:08:06.000Z</published>
    <updated>2016-07-31T14:53:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>作为一名程序员，Google当然必不可少，百度搜索技术类的答案简直是不忍直视，早已无情抛弃。虽然Google良心好用，然而ZF立了一堵墙，把我们当成幼儿园的孩子一样关在墙内，不让你出去浪。</p><p>然而作为机智的程序员，一堵墙怎么可能阻挡我们出去浪…咳咳…好好学习。那么如何科学上网就是今天要讨论的话题了。推荐一个非常好用的翻墙工具，让大家可以科学上网。(熟练各种翻墙姿势的猿们可以忽视此篇博客)</p><a id="more"></a><h2 id="科学上网，我用lantern"><a href="#科学上网，我用lantern" class="headerlink" title="科学上网，我用lantern"></a><a href="http://getlantern.org/" target="_blank" rel="noopener">科学上网，我用lantern</a></h2><p>对，没错，就是lantern，这是目前我用过的最良心的翻墙软件，没有之一。只要打开lantern，不需要设置就可以直接翻墙上网，而且完全免费，非常稳定，如果有时候你发现你访问不了Google了，只需要退出lantern重新打开就可以了。</p><p>lantern支持桌面版和安卓版，所以不但PC机可以科学上网，安卓手机也可以轻松科学上网了。</p><p>下面是下载链接，lantern官网可能需要翻墙才可以打开，但是你可以在lantern的Github上下载，其中有lantern的各个版本。</p><p>lantern官网：<a href="http://getlantern.org/" target="_blank" rel="noopener">http://getlantern.org/</a></p><p>lantern的Github：<a href="https://github.com/getlantern/lantern" target="_blank" rel="noopener">https://github.com/getlantern/lantern</a></p><p>注：由于现在Lantern使用人数急剧增多，所以现在在使用Google的时候可能会跳出人机验证的界面，因为使用人数太多，所以Google可能将其检测为机器人或爬虫了。这是正常的，正确输入验证码验证即可。</p><h2 id="ISS"><a href="#ISS" class="headerlink" title="ISS"></a><a href="http://www.ishadowsocks.net/" target="_blank" rel="noopener">ISS</a></h2><p>之前用的一款翻墙软件，这个没有lantern好用，但也还勉强不错。主要是它的官网不需要翻墙。</p><p>但是这一款需要配置服务器地址跟密码，并且密码6小时换一次，而且有时候很不稳定。</p><p>ISS官网：<a href="http://www.ishadowsocks.net/" target="_blank" rel="noopener">http://www.ishadowsocks.net/</a></p><h2 id="XX-net"><a href="#XX-net" class="headerlink" title="XX-net"></a><a href="https://github.com/XX-net/XX-Net" target="_blank" rel="noopener">XX-net</a></h2><p>这也是很不错的翻墙工具，但是配置比较麻烦，不过据说翻墙效果比lantern要好。本人暂时还没有亲自尝试过，所以就不多做评价了。喜欢折腾的小伙伴们可以去尝试一下哦。</p><p>Github地址：<a href="https://github.com/XX-net/XX-Net" target="_blank" rel="noopener">https://github.com/XX-net/XX-Net</a><br>中文文档：<a href="https://github.com/XX-net/XX-Net/wiki/%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3" target="_blank" rel="noopener">具体配置方法的中文文档</a></p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>其他的翻墙姿势还有很多就不一一说明了。希望大家翻墙愉快，科学上网。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;作为一名程序员，Google当然必不可少，百度搜索技术类的答案简直是不忍直视，早已无情抛弃。虽然Google良心好用，然而ZF立了一堵墙，把我们当成幼儿园的孩子一样关在墙内，不让你出去浪。&lt;/p&gt;&lt;p&gt;然而作为机智的程序员，一堵墙怎么可能阻挡我们出去浪…咳咳…好好学习。那么如何科学上网就是今天要讨论的话题了。推荐一个非常好用的翻墙工具，让大家可以科学上网。(熟练各种翻墙姿势的猿们可以忽视此篇博客)&lt;/p&gt;
    
    </summary>
    
      <category term="Tools" scheme="http://dkylin.com/categories/Tools/"/>
    
    
      <category term="Tools" scheme="http://dkylin.com/tags/Tools/"/>
    
  </entry>
  
  <entry>
    <title>Git基础用法总结</title>
    <link href="http://dkylin.com/archives/2016/git-base-usage-summary.html"/>
    <id>http://dkylin.com/archives/2016/git-base-usage-summary.html</id>
    <published>2016-04-17T07:08:47.000Z</published>
    <updated>2016-07-31T14:53:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>最近在忙着面试找工作，一直没更新博客。今天周末抽时间把Git相关的一些知识及用法整理总结一下。</p><p>Git是目前世界上最先进的分布式版本控制系统，没有之一，对，没有之一。著名的同性交友网站-Github，使用的就是Git存储。无数的开源项目在Github上汇聚，由此可知Git的威力。</p><a id="more"></a><h2 id="一、Git简介"><a href="#一、Git简介" class="headerlink" title="一、Git简介"></a>一、Git简介</h2><p>Git是一个分布式的版本控制系统，与集中式的版本控制系统不同的是，每个人都工作在通过克隆建立的本地版本库中。也就是说每个人都拥有一个完整的版本库，查看提交日志、提交、创建里程碑和分支、合并分支、回退等所有操作都直接在本地完成而不需要网络连接。</p><p>对于Git仓库来说，每个人都有一个独立完整的仓库，所谓的远程仓库或是服务器仓库其实也是一个仓库，只不过这台主机24小时运行，它是一个稳定的仓库，供他人克隆、推送，也从服务器仓库中拉取别人的提交。</p><h2 id="二、Git安装"><a href="#二、Git安装" class="headerlink" title="二、Git安装"></a>二、Git安装</h2><p>Git是Linux之父Linus的第二个伟大的作品，它最早是在Linux上开发的，被用来管理Linux核心的源代码。后来慢慢地有人将其移植到了Unix、Windows、Max OS等操作系统中。</p><p>想要使用Git，第一步当然是安装。</p><h3 id="2-1-Linux安装"><a href="#2-1-Linux安装" class="headerlink" title="2.1 Linux安装"></a>2.1 Linux安装</h3><p>我以Ubuntu系统为例，使用下面的命令可以查看该系统是否安装了Git。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git</span><br><span class="line">The program &apos;git&apos; is currently not installed. You can install it by typing:</span><br><span class="line">sudo apt-get install git</span><br></pre></td></tr></table></figure><p>如果如上所示，则说明没有安装Git，根据提示使用下面的命令安装Git。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install git</span><br></pre></td></tr></table></figure><p>有一些教程的安装命令是：<code>sudo apt-get install git-core</code>，那是因为以前有个软件叫GIT(GNU Interactive Tools)，所以Git只能叫<code>git-core</code>，不过现在由于Git太有名。GNU Interactive Tools已经改名为<code>gnuit</code>，<code>git-core</code>也正式改名为<code>git</code>。所以<strong>老一点</strong>的教程或者系统是使用<code>sudo apt-get install git-core</code>。</p><h3 id="2-2-Windows上安装"><a href="#2-2-Windows上安装" class="headerlink" title="2.2 Windows上安装"></a>2.2 Windows上安装</h3><p>在<a href="https://git-scm.com/downloads" target="_blank" rel="noopener">Git官网</a>下载Windows版本的安装软件。根据你的电脑系统选择32位或者是64位。下载完成之后。双击运行，根据引导进行安装。</p><p>安装完成之后，你可以在开始菜单中找到“Git”-&gt;”Git Bash”，打开“Git Bash”之后如果出现一个类似命令行窗口的东西，则说明安装成功。如下图所示：</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image%2Fgit%2Fgit-bash-win.png" alt="Git Bash"></p><h3 id="2-3-Mac-OS-X-上安装"><a href="#2-3-Mac-OS-X-上安装" class="headerlink" title="2.3 Mac OS X 上安装"></a>2.3 Mac OS X 上安装</h3><blockquote><p>等我买了Mac笔记本再更新…心疼的摸一把自己的钱包。</p></blockquote><h3 id="2-4-安装后的配置"><a href="#2-4-安装后的配置" class="headerlink" title="2.4 安装后的配置"></a>2.4 安装后的配置</h3><p>安装完成之后可以使用下面的命令查看当前Git的版本。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git version</span><br><span class="line">git version 1.9.1</span><br></pre></td></tr></table></figure><p>Git安装完成之后需要进行一些简单的设置。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name &quot;Your Name&quot;</span><br><span class="line">$ git config --global user.email &quot;email@example.com&quot;</span><br></pre></td></tr></table></figure><p><code>--global</code>这个参数的意思就是当前机器中的所有仓库都是用这个配置。</p><p>有时候你在使用Git的过程中可能会出现<code>warning: LF will be replaced by CRLF</code>。这是因为Windows中的换行符为 CRLF， 而在linux下的换行符为：LF。所以有时候你在执行<code>git add .</code>时，系统会提示：LF 将被转换成 CRLF。使用下面的命令可以禁用自动转换。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global core.autocrlf false</span><br></pre></td></tr></table></figure><h2 id="三、Git用法"><a href="#三、Git用法" class="headerlink" title="三、Git用法"></a>三、Git用法</h2><h3 id="3-1-创建版本库"><a href="#3-1-创建版本库" class="headerlink" title="3.1 创建版本库"></a>3.1 创建版本库</h3><p>创建版本库非常的简单，选择一个合适的地方，使用下面的命令创建版本库。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir TestGit # 创建文件夹</span><br><span class="line">$ cd TestGit # 进入文件夹</span><br><span class="line">$ git init # 初始化成Git版本库</span><br><span class="line">Initialized empty Git repository in /home/kylin/Repositories/TestGit/.git/</span><br></pre></td></tr></table></figure><p>至此一个空的Git仓库就创建好了，就是这么的简单。在这个目录下你会看到一个<code>.git</code>目录。这个目录就是Git用来跟踪管理版本库的。所以千万不要修改删除这个文件夹中的文件。因为这是隐藏目录，所以如果你看不见可以使用命令<code>ls -a</code>来查看。</p><h3 id="3-2-Git基本命令"><a href="#3-2-Git基本命令" class="headerlink" title="3.2 Git基本命令"></a>3.2 Git基本命令</h3><p>当创建好了一个版本库之后，我们就可以在版本库中进行版本控制了。所以我们需要了解一下Git的一些基本命令。</p><blockquote><ul><li>git add # 将工作区的修改提交到暂存区</li><li>git commit # 将暂存区的修改提交到当前分支</li><li>git status # 查看当前仓库的状态</li><li>git diff # 查看修改</li><li>git log # 查看提交历史</li><li>git reset # 回退到某一个版本</li><li>git reflog # 查看历史命令，类似与Linux中的history</li></ul></blockquote><h3 id="3-3-工作区和暂存区"><a href="#3-3-工作区和暂存区" class="headerlink" title="3.3 工作区和暂存区"></a>3.3 工作区和暂存区</h3><p>上面说到了工作区和暂存区的概念，想要用好Git，那么了解Git中的工作区、暂存区之间的关系是很重要的。先来看一张图。</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image%2Fgit%2Fgit-repository.png" alt="工作区和暂存区"></p><p>工作区：在你的电脑中可以看见的Git仓库的那个目录，如之前我创建的<code>TestGit</code>目录。那文件夹就是一个工作区。当我们往版本库提交的时候有两个步骤：</p><blockquote><ol><li>git add # 这一步就是将工作区中修改添加到暂存区（stage）中。</li><li>git commit # 这一步其实就是将暂存区中的修改添加到当前的分支中。</li></ol></blockquote><p>所以我们在提交的时候一般都是这样：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git add . # 将工作区中所有修改提交到暂存区，&quot;.&quot;点的含义就是所有修改</span><br><span class="line">$ git commit -m &quot;first commit&quot; # 将暂存区的所有修改提交到当前分支，-m参数是命名当前的提交</span><br></pre></td></tr></table></figure><h3 id="3-4-其他命令使用"><a href="#3-4-其他命令使用" class="headerlink" title="3.4 其他命令使用"></a>3.4 其他命令使用</h3><p>当我们修改了版本库中的一些文件之后，可以使用<code>git status</code>命令来查看都有那些修改。</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image%2Fgit%2Fgit-status.png" alt="git-status"></p><p>当你想要查看某个文件修改那些具体的内容，可以使用<code>git diff &lt;filename&gt;</code>命令来查看。</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image%2Fgit%2Fgit-diff.png" alt="git-diff"></p><p>当你的版本库有了很多次提交之后，你想查看以往的提交记录的话可以使用<code>git log</code>来查看历史提交记录。</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image%2Fgit%2Fgit-log.png" alt="git-log"></p><p>如果你想查看两次提交版本之间有什么修改的话，也可以使用<code>git diff</code>来查看。</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image%2Fgit%2Fgit-diff-2.png" alt="git-diff-2"></p><p>如果你想要回到之前的版本的话，可以使用<code>git reset</code>命令。</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image%2Fgit%2Fgit-reset.png" alt="git-reset"></p><p>如上图所示，先使用<code>git log</code>查看历史版本记录，可以看到有两个。先使用<code>git reset --hard 51fca33</code>命令让版本回退到第一次提交的时候。再使用<code>git log</code>命令查看一下当前的版本发现只有一个了，这时候版本成功回退到第一次提交的时候。</p><p>那么如果我此时又想让版本回退到第二次提交的时候怎么办呢？此时只有一个版本啊。这时使用<code>git reflog</code>可以查看历史操作记录。只需要使用命令<code>git reset</code>回退到之前的操作就可以了。如下图所示：</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image%2Fgit%2Fgit-reflog.png" alt="git-reflog"></p><p>在上面的图中可以看到，commit_id是<code>51fca33c34eec36c787faef180ccf2d3e5017462</code>一大长串。但是我的命令中只使用了<code>51fca33</code>前面一小段。因为Git会根据你的输入自动去寻找相应的版本号，所以并不需要输入完整的ID,但是注意也不要输入太短。</p><p>掌握了上面这些命令的话，基本上Git就可以很顺畅的使用了。当然在实际应用中，我们还需要学习远程仓库和分支的使用。</p><h2 id="四、远程仓库"><a href="#四、远程仓库" class="headerlink" title="四、远程仓库"></a>四、远程仓库</h2><p>Git是分布式版本控制系统，同一个仓库，可以同步到很多不同的主机中，那么如何同步呢？这个时候只需要使用Git中克隆命令就可以从别的仓库中复制一份一样的到你的版本库中。非常的方便。</p><p>首先需要使用克隆命令从远程服务器克隆版本库到本地，使用下面的命令进行克隆。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone &lt;url&gt; # url是远程版本库的地址</span><br></pre></td></tr></table></figure><p>使用<code>git remote -v</code>查看远程版本库的信息。如下图所示，前面的origin是远程库的别名，后面的地址是远程库的具体地址。使用<code>git remote remove &lt;别名&gt;</code>可以删除一个远程仓库。</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image%2Fgit%2Fgit-remote-remove.png" alt="git-remote-remove"></p><p>当我们使用<code>git clone &lt;url&gt;</code>命令克隆远程仓库的时候，已经自动添加了此远程仓库，别名为<code>origin</code>。如果你是在本地<code>git init</code>自己手动创建的版本库，想要和远程仓库进行关联，需要使用命令<code>git remote add &lt;remote-name&gt; &lt;url&gt;</code>先添加一个远程仓库。添加完成之后可以使用<code>git remote -v</code>查看。</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image%2Fgit%2Fgit-remote-add.png" alt="git-remote-add"></p><p>当然，也许你还想要添加其他的远程仓库，只需要在添加其他远程仓库的时候保证别名不一致就可以了。<code>origin</code>是默认的别名。</p><p>当你添加了远程仓库之后，本地仓库就可以与远程仓库进行关联以及操作了。如果你想把本地仓库中的修改提交到远程仓库，可以使用命令<code>git push &lt;remote-name&gt; &lt;branch&gt;</code>提交到远程仓库。</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image%2Fgit%2Fgit-push.png" alt="git-push"></p><p>如果远程仓库中的文件有所改动，那么可以使用命令<code>git pull &lt;remote-name&gt; &lt;branch&gt;</code>下载远程仓库中的修改并进行快速合并。如果有与本地文件相冲突的内容，在命令行中会有提示，根据提示进行手动消除冲突就可以了。这样的话就可以让自己的本地库与远程库保持一致了。</p><h2 id="五、分支管理"><a href="#五、分支管理" class="headerlink" title="五、分支管理"></a>五、分支管理</h2><p>Git中分支的使用非常快捷方便，相对于SVN来说，速度快了不知道多少。熟练的使用分支是团队协作开发的基础。</p><h3 id="5-1-创建与合并分支"><a href="#5-1-创建与合并分支" class="headerlink" title="5.1 创建与合并分支"></a>5.1 创建与合并分支</h3><p>在Git中分支的创建、切换、删除都十分的快捷方便。主要命令如下：</p><blockquote><ul><li>git branch # 查看所有本地分支</li><li>git branch<new-branch># 创建一个新的分支</new-branch></li><li>git checkout<branch># 切换到指定分支</branch></li><li>git branch -d<branch># 删除一个分支</branch></li><li>git merge<branch># 将指定的分支合并到当前分支</branch></li></ul></blockquote><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image%2Fgit%2Fgit-base-branch.png" alt="git-base-branch"></p><p>上图显示了分支的查看、创建、创建、切换、删除这几种操作。使用<code>git branch</code>可以查看本地所有分支，并且分支前面有一个<code>*</code>号的是当前分支。</p><p>在团队的实际开发中，<code>master</code>主分支应该是最稳定的，用来发布新版本。<code>dev</code>分支是开发分支，在这个分支中进行开发，每一个程序员应当有自己的分支，如我在开发中需要创建我自己的分支<code>kylin</code>，我写的程序全部提交到<code>kylin</code>分支中，当完成了某一个模块，再将<code>kylin</code>分支的内容合并到<code>dev</code>中。这是团队开发中分支的基本管理，这里用到了分支合并，请看下图。</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image%2Fgit%2Fgit-merge.png" alt="git-merge"></p><p>在上图中，我先切换到<code>dev</code>开发分支，修改了<code>README.md</code>文件之后，将修改提交到<code>dev</code>分支。然后切换到<code>master</code>分支，将<code>dev</code>分支使用命令<code>git merge &lt;branch&gt;</code>合并到<code>master</code>主分支中。这就是分支合并的基本用法。</p><h3 id="5-2-团队协作"><a href="#5-2-团队协作" class="headerlink" title="5.2 团队协作"></a>5.2 团队协作</h3><p>在团队协作中，我们需要了解分支管理。团队协作中的分支管理应该如同下图所示。</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image%2Fgit%2Fgit-brach-group.png" alt="git-branch-group"></p><blockquote><ol><li><code>master</code>主分支应该是最稳定的，主要用来发布新版本。</li><li><code>dev</code>分支是开发分支，这是最不稳定的，程序员们都在这上面干活，只有当版本发布的时候，才将此分支合并到<code>master</code>主分支上。</li><li>每一个程序员应当有自己的分支，当完成某一块的内容的时候，往<code>dev</code>分支合并即可。</li></ol></blockquote><p>当程序出现了BUG的时候，你可以在<code>master</code>或是<code>dev</code>分支创建一个临时分支<code>issue-001</code>，在这个分支修复BUG，修复完成之后将此分支合并到主分支，然后删除BUG分支即可。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>Git版本控制器真心是非常非常好用，在团队开发中可以很好的提高工作效率，真心是团队开发必备。本篇博客由于篇幅的原因，不能把Git的知识讲解的特别详细。仅将平时最常用的知识及命令整理总结了一下，如果有说的不好的地方还请指出来，我将及时改正。</p><p>如果有小伙伴想要更加深入的了解Git的使用及其他的内容的话，在这里给大家推荐一些比较好的教程。</p><ol><li><a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="noopener">廖雪峰的Git教程（非常推荐）</a></li><li><a href="http://pan.baidu.com/s/1o7LWJbW" target="_blank" rel="noopener">Git权威指南</a></li><li><a href="http://pan.baidu.com/s/1nuG9erR" target="_blank" rel="noopener">Pro Git 中文版本</a></li></ol><p>最后在附上一张<strong>Git命令速查表</strong>。</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image%2Fgit%2FGit.jpg" alt="git-command"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近在忙着面试找工作，一直没更新博客。今天周末抽时间把Git相关的一些知识及用法整理总结一下。&lt;/p&gt;&lt;p&gt;Git是目前世界上最先进的分布式版本控制系统，没有之一，对，没有之一。著名的同性交友网站-Github，使用的就是Git存储。无数的开源项目在Github上汇聚，由此可知Git的威力。&lt;/p&gt;
    
    </summary>
    
      <category term="Git" scheme="http://dkylin.com/categories/Git/"/>
    
    
      <category term="Git" scheme="http://dkylin.com/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Android集成微信支付功能</title>
    <link href="http://dkylin.com/archives/2016/android-wechat-pay-tutorial.html"/>
    <id>http://dkylin.com/archives/2016/android-wechat-pay-tutorial.html</id>
    <published>2016-03-31T13:00:37.000Z</published>
    <updated>2016-07-31T14:53:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>在移动应用开发中，不少都有支付的功能需求，在移动支付方面，支付宝支付与微信支付方便快捷，并且用户人群广，是很多移动支付的首选。在上一篇讲到了<a href="http://dkylin.com/archives/android-alipay-tutorial.html">Android集成支付宝支付功能</a>，那么这一篇将介绍Android集成微信支付功能。</p><a id="more"></a><h2 id="一、开发准备"><a href="#一、开发准备" class="headerlink" title="一、开发准备"></a>一、开发准备</h2><p><a href="https://pay.weixin.qq.com/wiki/doc/api/app/app.php?chapter=8_5" target="_blank" rel="noopener">1. 微信支付-官方文档</a></p><p><a href="https://pay.weixin.qq.com/wiki/doc/api/app/app.php?chapter=11_1" target="_blank" rel="noopener">2. 微信支付-官方Demo&amp;SDK</a></p><p><a href="https://github.com/dkylin/MobilePaymentDemo/tree/master/Android-Wechat-Pay" target="_blank" rel="noopener">3. 本教程对应的源代码</a></p><h2 id="二、微信接入"><a href="#二、微信接入" class="headerlink" title="二、微信接入"></a>二、微信接入</h2><p>想要接入微信移动支付功能，需要在<a href="https://open.weixin.qq.com/cgi-bin/index?t=home/index&amp;lang=zh_CN" target="_blank" rel="noopener">微信开放平台</a>及<a href="https://pay.weixin.qq.com/index.php/home/login?return_url=%2F" target="_blank" rel="noopener">微信商户平台</a>注册帐号，并且申请应用，应用申请结束之后需要申请微信支付接口，这个可以在对应平台中查看操作流程，并不是很难。</p><p>在官方Demo中，并没有用到服务器端，其实在实际开发中肯定是需要将一些操作步骤放在服务器端的。本篇博客也是基于实际开发环境而作介绍的。所以有客户端代码及服务器端代码，与官方Demo有很大的不同。</p><h3 id="2-1-开发前配置"><a href="#2-1-开发前配置" class="headerlink" title="2.1 开发前配置"></a>2.1 开发前配置</h3><p><strong>1. 导入微信支付Jar包</strong></p><p>将下载的Jar包<code>libammsdk.jar</code>复制到libs文件夹下，如果libs文件夹不存在则新建一个，然后右键Jar包，选择<code>Add to Build Path</code>即可。</p><p>如果开发的时候发现Jar包不起作用，那么则进入该项目的<code>Java Build Path</code>，选中<code>Order and Export</code>，将libammsdk.jar勾选即可。</p><p><strong>2. 修改Manifest文件</strong></p><p>添加相应权限：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.MODIFY_AUDIO_SETTINGS"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>在主界面中添加以下内容(不添加也可以支付，但是还是按照官方规定来比较保险)：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.VIEW"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.DEFAULT"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:scheme</span>=<span class="string">"wxd930ea5d5a258f4f"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br></pre></td></tr></table></figure><p>同时添加Activity如下:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">"com.pay.wechat.wxapi.WXPayEntryActivity"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:exported</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:launchMode</span>=<span class="string">"singleTop"</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure><p>修改之后应该是这样的：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:allowBackup</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:icon</span>=<span class="string">"@drawable/ic_launcher"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:label</span>=<span class="string">"@string/app_name"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:theme</span>=<span class="string">"@style/AppTheme"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"com.pay.activity.MainActivity"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:label</span>=<span class="string">"@string/app_name"</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.MAIN"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.LAUNCHER"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.VIEW"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.DEFAULT"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:scheme</span>=<span class="string">"wxd930ea5d5a258f4f"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"com.dgaotech.dgfw.wxapi.WXPayEntryActivity"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:exported</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:launchMode</span>=<span class="string">"singleTop"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-2-程序结构"><a href="#2-2-程序结构" class="headerlink" title="2.2 程序结构"></a>2.2 程序结构</h3><p>由于我的代码分为了客户端跟服务器端，所有程序结构较官方Demo有些不同。</p><p>客户端src目录结构如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">├── com.pay.activity</span><br><span class="line">|   ├── MainActivity.java</span><br><span class="line">├── com.pay.wechat</span><br><span class="line">|   ├── Constans.java</span><br><span class="line">|   ├── WechatPay.java</span><br><span class="line">├── com.dgaotech.dgfw.wxapi</span><br><span class="line">|   ├── WXPayEntryActivity.java</span><br><span class="line">├── com.pay.utils</span><br><span class="line">|   ├── HttpUtils.java</span><br><span class="line">└── ...</span><br></pre></td></tr></table></figure><ul><li>MainActivity.java - 程序主界面</li><li>Constans.java - 基础配置参数</li><li>WechatPay.java - 微信支付类</li><li>WXPayEntryActivity.java - 支付完成的回调界面</li><li>HttpUtils.java - Http请求的辅助类</li></ul><p>注意：WXPayEntryActivity.java界面是支付完成(成功/失败/退出)之后的回调界面，它的包名应该是本应用在微信注册的包名，也就是本应用的包名+.wxapi。如：例子程序的包名是：<code>com.dgaotech.dgfw</code>，WXPayEntryActivity的包名应该是：<code>com.dgaotech.dgfw.wxapi</code>。</p><h3 id="2-3-客户端程序"><a href="#2-3-客户端程序" class="headerlink" title="2.3 客户端程序"></a>2.3 客户端程序</h3><p>以我写的Demo为例，主界面代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> <span class="keyword">implements</span> <span class="title">OnClickListener</span></span>&#123;</span><br><span class="line"><span class="keyword">private</span> Button btnWechatPay;</span><br><span class="line"></span><br><span class="line">Handler createOrderHandler = <span class="keyword">new</span> Handler() &#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(android.os.Message msg)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (msg.what == <span class="number">0</span>) &#123;</span><br><span class="line">String result = (String) msg.obj;</span><br><span class="line">WechatPay.pay(MainActivity.<span class="keyword">this</span>, result);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        </span><br><span class="line">        initView();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initView</span><span class="params">()</span></span>&#123;</span><br><span class="line">    btnWechatPay = (Button) findViewById(R.id.btn_wechat_pay);</span><br><span class="line">    btnWechatPay.setOnClickListener(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CreateOrderThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">final</span> String trade_no = System.currentTimeMillis()+<span class="string">""</span>; <span class="comment">// 每次交易号不一样</span></span><br><span class="line"><span class="keyword">final</span> String total_fee = <span class="string">"0.01"</span>;</span><br><span class="line"><span class="keyword">final</span> String subject = <span class="string">"测试的商品"</span>;</span><br><span class="line">String result = WechatPay.createOrder(trade_no, total_fee, subject);</span><br><span class="line">Message msg = createOrderHandler.obtainMessage();</span><br><span class="line">msg.what = <span class="number">0</span>;</span><br><span class="line">msg.obj = result;</span><br><span class="line">createOrderHandler.sendMessage(msg);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line"><span class="keyword">switch</span> (view.getId()) &#123;</span><br><span class="line"><span class="keyword">case</span> R.id.btn_wechat_pay:</span><br><span class="line"><span class="comment">// 使用微信进行支付</span></span><br><span class="line"><span class="keyword">new</span> CreateOrderThread().start();</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当点击了支付按钮之后，创建一个子线程先创建一个订单（统一下单），订单创建完成之后会返回<code>prepay_id</code>参数，有了这个参数之后才能向微信发起支付。</p><p>下面是微信支付类<code>WechatPay.java</code>的代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WechatPay</span> </span>&#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 生成订单的方法</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> tradeNo 交易号</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> totalFee 支付金额</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> subject 详细描述</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">createOrder</span><span class="params">(String tradeNo, String totalFee, String subject)</span> </span>&#123;</span><br><span class="line">String result = <span class="string">""</span>;</span><br><span class="line">String URL_PREPAY = Constants.URL_PAY_CALLBACK + <span class="string">"/UnifiedOrderServlet"</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">subject = URLEncoder.encode(subject, <span class="string">"UTF-8"</span>);</span><br><span class="line">String url = URL_PREPAY + <span class="string">"?trade_no="</span> + tradeNo + <span class="string">"&amp;total_fee="</span> + totalFee + <span class="string">"&amp;subject="</span> + subject;</span><br><span class="line">result = HttpUtils.doGet(url);</span><br><span class="line">&#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 支付的方法</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> activity</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> result 服务器生成订单返回的json字符串</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">pay</span><span class="params">(Activity activity, String result)</span> </span>&#123;</span><br><span class="line">IWXAPI api = WXAPIFactory.createWXAPI(activity, Constants.WX_APP_ID); <span class="comment">// 将该app注册到微信</span></span><br><span class="line">JSONObject jsonObject;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">jsonObject = <span class="keyword">new</span> JSONObject(result);</span><br><span class="line">PayReq payReq = <span class="keyword">new</span> PayReq();</span><br><span class="line">payReq.appId = Constants.WX_APP_ID;</span><br><span class="line">payReq.partnerId = Constants.WX_MCH_ID;</span><br><span class="line">payReq.prepayId = jsonObject.getString(<span class="string">"prepayid"</span>);</span><br><span class="line">payReq.nonceStr = jsonObject.getString(<span class="string">"noncestr"</span>);</span><br><span class="line">payReq.timeStamp = jsonObject.getString(<span class="string">"timestamp"</span>);</span><br><span class="line">payReq.packageValue = jsonObject.getString(<span class="string">"package"</span>);</span><br><span class="line">payReq.sign = jsonObject.getString(<span class="string">"sign"</span>);</span><br><span class="line">api.sendReq(payReq);</span><br><span class="line">&#125; <span class="keyword">catch</span> (JSONException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此类有两个方法，第一个方法<code>createOrder()</code>的功能是向服务器发送统一下单的请求以获取<code>prepay_id</code>参数。第二个方法则是支付功能。</p><h3 id="2-4-服务器端程序"><a href="#2-4-服务器端程序" class="headerlink" title="2.4 服务器端程序"></a>2.4 服务器端程序</h3><p>服务器端主要功能是生成预支付订单（官方称统一下单），同时可以在服务器端配置回调接口。</p><p>统一下单的Servlet主要代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">PaymentController controller = <span class="keyword">new</span> PaymentController();</span><br><span class="line"></span><br><span class="line">response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">response.getOutputStream().write(controller.unifiedOrder(request, response).getBytes(<span class="string">"UTF-8"</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>PaymentController</code>类中有两个方法，<code>unifiedOrder(HttpServletRequest request,HttpServletResponse response)</code>方法就是生成预支付订单的方法，<code>getRemoteHost(HttpServletRequest request)</code>方法则是获取客户端IP的方法。具体代码请查看源代码。</p><h2 id="三、Demo截图"><a href="#三、Demo截图" class="headerlink" title="三、Demo截图"></a>三、Demo截图</h2><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image%2Fmobile-payment%2Fandroid-wechat-pay.png" alt="Android-Wechat-Pay"></p><h2 id="四、注意事项"><a href="#四、注意事项" class="headerlink" title="四、注意事项"></a>四、注意事项</h2><p>源代码中涉及到的敏感参数已清空，请自行替换成自己申请的应用中包含的参数。</p><p><a href="https://github.com/dkylin/MobilePaymentDemo/tree/master/Android-Wechat-Pay" target="_blank" rel="noopener">本教程对应源代码</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在移动应用开发中，不少都有支付的功能需求，在移动支付方面，支付宝支付与微信支付方便快捷，并且用户人群广，是很多移动支付的首选。在上一篇讲到了&lt;a href=&quot;http://dkylin.com/archives/android-alipay-tutorial.html&quot;&gt;Android集成支付宝支付功能&lt;/a&gt;，那么这一篇将介绍Android集成微信支付功能。&lt;/p&gt;
    
    </summary>
    
      <category term="Android" scheme="http://dkylin.com/categories/Android/"/>
    
    
      <category term="Android" scheme="http://dkylin.com/tags/Android/"/>
    
      <category term="移动支付" scheme="http://dkylin.com/tags/%E7%A7%BB%E5%8A%A8%E6%94%AF%E4%BB%98/"/>
    
  </entry>
  
  <entry>
    <title>Android集成支付宝支付功能</title>
    <link href="http://dkylin.com/archives/2016/android-alipay-tutorial.html"/>
    <id>http://dkylin.com/archives/2016/android-alipay-tutorial.html</id>
    <published>2016-03-31T02:49:20.000Z</published>
    <updated>2017-04-01T03:51:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>在移动应用开发中，不少应用都有支付的功能需求，在移动支付方面，支付宝支付与微信支付方便快捷，并且用户人群广，是很多移动支付的首选。在之前的“动高服务”App的项目开发中，应用的支付模块就使用了三种支付方式：我的钱包支付、支付宝支付和微信支付。<br>本篇博客将对支付宝支付的接入开发过程做一个整理与总结。</p><p><a href="https://blog.dkylin.com/archives/android-wechat-pay-tutorial.html" target="_blank" rel="noopener">下一篇：Android集成微信支付功能</a></p><a id="more"></a><h2 id="一、开发准备"><a href="#一、开发准备" class="headerlink" title="一、开发准备"></a>一、开发准备</h2><p><a href="https://doc.open.alipay.com/doc2/detail?treeId=59&amp;articleId=103563&amp;docType=1" target="_blank" rel="noopener">1. 支付宝官方文档-移动支付</a></p><p><a href="https://aopsdkdownload.cn-hangzhou.alipay-pub.aliyun-inc.com/demo/WS_MOBILE_PAY_SDK_BASE.zip?spm=a219a.7629140.0.0.BLcRab&amp;file=WS_MOBILE_PAY_SDK_BASE.zip" target="_blank" rel="noopener">2. 移动支付的SDK&amp;DEMO下载</a></p><p><a href="https://doc.open.alipay.com/doc2/detail.htm?spm=a219a.7629140.0.0.vCcVse&amp;treeId=58&amp;articleId=103541&amp;docType=1" target="_blank" rel="noopener">3. 移动支付-接入指南</a> - 此文档非常重要，后面详细说明。</p><p><a href="https://github.com/dkylin/MobilePaymentDemo/tree/master/Android-Alipay" target="_blank" rel="noopener">4. 本教程对应的源代码</a></p><h2 id="二、支付宝接入"><a href="#二、支付宝接入" class="headerlink" title="二、支付宝接入"></a>二、支付宝接入</h2><p>想要接入支付宝移动支付功能，必须在<a href="https://b.alipay.com/order/productDetail.htm?productId=2015110218010538" target="_blank" rel="noopener">支付宝商家服务平台</a>进行申请与审核。移动支付功能需要企业或者个体工商户进行申请，审核通过之后方可使用。</p><p>如何与支付宝签约并审核请参考官方文档：<a href="https://doc.open.alipay.com/doc2/detail.htm?spm=a219a.7629140.0.0.vCcVse&amp;treeId=58&amp;articleId=103541&amp;docType=1" target="_blank" rel="noopener">移动支付-接入指南</a>，里面详细介绍了产品签约与审核流程。并且详细介绍了申请成功之后如何查看或生成必要的一些配置参数。</p><p>个人开发者则可以下载支付宝提供的<a href="https://aopsdkdownload.cn-hangzhou.alipay-pub.aliyun-inc.com/demo/WS_MOBILE_PAY_SDK_BASE.zip?spm=a219a.7629140.0.0.BLcRab&amp;file=WS_MOBILE_PAY_SDK_BASE.zip" target="_blank" rel="noopener">Demo</a>进行学习研究，在实际项目开发中，将必要参数替换即可。</p><h3 id="2-1-开发前配置"><a href="#2-1-开发前配置" class="headerlink" title="2.1 开发前配置"></a>2.1 开发前配置</h3><p><strong>1. 导入Alipay Jar包</strong></p><p>将下载的Jar包<code>alipaySDK-xxx.jar</code>复制到libs文件夹下，如果libs文件夹不存在则新建一个，然后右键Jar包，选择<code>Add to Build Path</code>即可。</p><p>如果开发的时候发现Jar包不起作用，那么则进入该项目的<code>Java Build Path</code>，选中<code>Order and Export</code>，将alipaySDK-xxx.jar勾选即可。</p><p><strong>2. 修改Manifest文件</strong></p><p>添加相应权限：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_NETWORK_STATE"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_WIFI_STATE"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.READ_PHONE_STATE"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>添加支付宝的H5支付页面（当手机没有安装支付宝时调用H5支付页面）：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- alipay sdk begin --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 若手机没有安装支付宝，则调用H5支付页面 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">"com.alipay.sdk.app.H5PayActivity"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:configChanges</span>=<span class="string">"orientation|keyboardHidden|navigation|screenSize"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:exported</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:screenOrientation</span>=<span class="string">"behind"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:windowSoftInputMode</span>=<span class="string">"adjustResize|stateHidden"</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- alipay sdk end --&gt;</span></span><br></pre></td></tr></table></figure><p><strong>3. 添加混淆规则</strong></p><p>在项目的<code>proguard-project.txt</code>里添加以下相关规则：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-libraryjars libs/alipaySDK-20160223.jar</span><br><span class="line"> </span><br><span class="line">-keep class com.alipay.android.app.IAlixPay&#123;*;&#125;</span><br><span class="line">-keep class com.alipay.android.app.IAlixPay$Stub&#123;*;&#125;</span><br><span class="line">-keep class com.alipay.android.app.IRemoteServiceCallback&#123;*;&#125;</span><br><span class="line">-keep class com.alipay.android.app.IRemoteServiceCallback$Stub&#123;*;&#125;</span><br><span class="line">-keep class com.alipay.sdk.app.PayTask&#123; public *;&#125;</span><br><span class="line">-keep class com.alipay.sdk.app.AuthTask&#123; public *;&#125;</span><br></pre></td></tr></table></figure><p>注意：第一行中的alipaySDK-20160223.jar，其中20160223是此版本发布的日期，注意将其修改为你导入的Jar的相应的文件名。</p><blockquote><p>至此开发前的配置已完成，接下来就可以进行代码的编写了。</p></blockquote><h3 id="2-2-程序结构"><a href="#2-2-程序结构" class="headerlink" title="2.2 程序结构"></a>2.2 程序结构</h3><p>在我的Demo项目中，我将支付宝支付相关的类统一放在了<code>com.pay.alipay</code>包中。</p><p>src目录结构如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">├── com.pay.activity</span><br><span class="line">|   ├── MainActivity.java</span><br><span class="line">├── com.pay.alipay</span><br><span class="line">|   ├── AlipayAPI.java</span><br><span class="line">|   ├── AlipayConfig.java</span><br><span class="line">|   ├── Base64.java</span><br><span class="line">|   ├── PayResult.java</span><br><span class="line">|   └── SignUtils.java</span><br><span class="line">└── ...</span><br></pre></td></tr></table></figure><ul><li>MainActivity.java - 主界面</li><li>AlipayAPI.java - 支付的一些主要方法</li><li>AlipayConfig.java - 基础配置</li><li>Base64.java - RSA密钥转换</li><li>PayResult.java - 支付结果</li><li>SignUtils.java - RSA签名类</li></ul><p>官方Demo中将支付，订单创建等操作都放在了Activity中，为了使代码结构更加清晰，我将支付的实现放在了AlipayAPI中。</p><h3 id="2-3-支付接口调用"><a href="#2-3-支付接口调用" class="headerlink" title="2.3 支付接口调用"></a>2.3 支付接口调用</h3><p>以我的写的Demo为例，主界面代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> <span class="keyword">implements</span> <span class="title">OnClickListener</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SDK_PAY_FLAG = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Button btnAlipay;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Handler mHandler = <span class="keyword">new</span> Handler() &#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line"><span class="keyword">switch</span> (msg.what) &#123;</span><br><span class="line"><span class="keyword">case</span> SDK_PAY_FLAG: &#123;</span><br><span class="line">PayResult payResult = <span class="keyword">new</span> PayResult((String) msg.obj);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 同步返回的结果必须放置到服务端进行验证，建议商户依赖异步通知</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">String resultInfo = payResult.getResult();<span class="comment">// 同步返回需要验证的信息</span></span><br><span class="line"></span><br><span class="line">String resultStatus = payResult.getResultStatus();</span><br><span class="line"><span class="comment">// 判断resultStatus 为“9000”则代表支付成功，具体状态码代表含义可参考接口文档</span></span><br><span class="line"><span class="keyword">if</span> (TextUtils.equals(resultStatus, <span class="string">"9000"</span>)) &#123;</span><br><span class="line">Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"支付成功"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">// 判断resultStatus 为非"9000"则代表可能支付失败</span></span><br><span class="line"><span class="comment">// "8000"代表支付结果因为支付渠道原因或者系统原因还在等待支付结果确认，最终交易是否成功以服务端异步通知为准（小概率状态）</span></span><br><span class="line"><span class="keyword">if</span> (TextUtils.equals(resultStatus, <span class="string">"8000"</span>)) &#123;</span><br><span class="line">Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"支付结果确认中"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">// 其他值就可以判断为支付失败，包括用户主动取消支付，或者系统返回的错误</span></span><br><span class="line">Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"支付失败"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        </span><br><span class="line">        initView();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initView</span><span class="params">()</span></span>&#123;</span><br><span class="line">    btnAlipay = (Button) findViewById(R.id.btn_alipay);</span><br><span class="line">    btnAlipay.setOnClickListener(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 支付宝支付异步任务</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> Kylin</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">AliPayThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">String result = AlipayAPI.pay(MainActivity.<span class="keyword">this</span>, <span class="string">"测试的商品"</span>, <span class="string">"测试商品的详细描述"</span>, <span class="string">"0.01"</span>); </span><br><span class="line">Message msg = <span class="keyword">new</span> Message();</span><br><span class="line">msg.what = SDK_PAY_FLAG;</span><br><span class="line">msg.obj = result;</span><br><span class="line">mHandler.sendMessage(msg);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line"><span class="keyword">switch</span> (view.getId()) &#123;</span><br><span class="line"><span class="keyword">case</span> R.id.btn_alipay:</span><br><span class="line"><span class="comment">// 使用支付宝进行支付</span></span><br><span class="line"><span class="keyword">new</span> AliPayThread().start();</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当点击了支付按钮之后，创建一个子线程执行支付操作，调用<code>AlipayAPI.pay()</code>方法进行支付，返回<code>result</code>之后通知Handler进行处理，取出<code>resultStatus</code>参数判断支付是否成功。</p><blockquote><ul><li>resultStatus = 9000 ：支付成功</li><li>resultStatus = 8000 ：支付确认中（小概率事件）</li><li>resultStatus = 其他 ：支付失败</li></ul></blockquote><h3 id="2-4-支付调用过程"><a href="#2-4-支付调用过程" class="headerlink" title="2.4 支付调用过程"></a>2.4 支付调用过程</h3><p>上面介绍了支付的调用以及返回结果的获取和判断这一完整的支付流程，下面解释一下支付调用的过程。</p><p>首先需要在<code>AlipayConfig.java</code>中配置相应的参数，参数的获取在上面有介绍（由于参数比较敏感，所以此处为空）：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AlipayConfig</span> </span>&#123;</span><br><span class="line"><span class="comment">// 商户PID</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String PARTNER = <span class="string">""</span>;</span><br><span class="line"><span class="comment">// 商户收款账号</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String SELLER = <span class="string">""</span>;</span><br><span class="line"><span class="comment">// 商户私钥，pkcs8格式</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String RSA_PRIVATE = <span class="string">""</span>;</span><br><span class="line"><span class="comment">// 支付宝公钥</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String RSA_PUBLIC = <span class="string">""</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置好了参数之后才可以使程序正常运行，下面来看<code>AlipayAPI.pay()</code>方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> activity</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> subject 商品名称</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> body 商品的详细描述</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> price 支付金额</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">pay</span><span class="params">(Activity activity, String subject, String body, String price)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">String orderInfo = getOrderInfo(subject, body, price); <span class="comment">// 创建订单信息</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 特别注意，这里的签名逻辑需要放在服务端，切勿将私钥泄露在代码中！</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">String sign = sign(orderInfo);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">sign = URLEncoder.encode(sign, <span class="string">"UTF-8"</span>); <span class="comment">// 仅需对sign 做URL编码</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 完整的符合支付宝参数规范的订单信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">final</span> String payInfo = orderInfo + <span class="string">"&amp;sign=\""</span> + sign + <span class="string">"\"&amp;"</span> + getSignType();</span><br><span class="line"></span><br><span class="line">PayTask alipay = <span class="keyword">new</span> PayTask(activity);</span><br><span class="line">String result = alipay.pay(payInfo, <span class="keyword">true</span>); <span class="comment">// 调用支付接口进行支付</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>首先需要通过<code>getOrderInfo()</code>方法创建订单信息，其实就是按照支付宝规定的格式封装相应的数据，其中就有<code>AlipayConfig.java</code>中的参数，具体过程请查看源代码。创建完订单信息之后，需要使用<code>sign()</code>方法对其签名，然后使用UTF-8编码对<code>sign</code>进行编码。</p><p>PayTask接口是开发包提供支付，查询的对象接口。下面的代码就是支付宝支付的操作代码，<code>result</code>就是支付返回的结果。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PayTask alipay = <span class="keyword">new</span> PayTask(activity);</span><br><span class="line">String result = alipay.pay(payInfo, <span class="keyword">true</span>); <span class="comment">// 调用支付接口进行支付</span></span><br></pre></td></tr></table></figure><h3 id="2-5-获取当前开发包版本号"><a href="#2-5-获取当前开发包版本号" class="headerlink" title="2.5 获取当前开发包版本号"></a>2.5 获取当前开发包版本号</h3><p>可以通过下面的代码获取支付宝开发包的版本号：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PayTask payTask = <span class="keyword">new</span> PayTask(activity);</span><br><span class="line">String version = payTask.getVersion();</span><br></pre></td></tr></table></figure><h2 id="三、Demo截图"><a href="#三、Demo截图" class="headerlink" title="三、Demo截图"></a>三、Demo截图</h2><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image%2Fmobile-payment%2Fandroid-alipay.png" alt="Android-Alipay-Image"></p><h2 id="四、注意事项"><a href="#四、注意事项" class="headerlink" title="四、注意事项"></a>四、注意事项</h2><p>相信在上面的介绍中都看到了有几处注释说明了，此项操作要放在服务器操作等等之类的。</p><p>这是因为代码中有一些参数和操作是比较敏感的，如果被一些不法分子得到之后有可能会对商家造成一定的损失，虽然添加了混淆规则，但是还是将其放在服务器端较为安全。</p><p>所以建议在学习了支付宝支付的步骤之后，根据自己的功能需求设计网络通信接口，将支付宝支付中的部分敏感信息及操作放在服务器端进行以保证支付的安全。</p><p>本教程对应的源代码已上传到Github，感兴趣的可以下载查看：<a href="https://github.com/dkylin/MobilePaymentDemo/tree/master/Android-Alipay" target="_blank" rel="noopener">Android-Alipay-Demo</a>(本项目中涉及到的敏感参数已经置空，请自行替换成自己应用的参数)。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在移动应用开发中，不少应用都有支付的功能需求，在移动支付方面，支付宝支付与微信支付方便快捷，并且用户人群广，是很多移动支付的首选。在之前的“动高服务”App的项目开发中，应用的支付模块就使用了三种支付方式：我的钱包支付、支付宝支付和微信支付。&lt;br&gt;本篇博客将对支付宝支付的接入开发过程做一个整理与总结。&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://blog.dkylin.com/archives/android-wechat-pay-tutorial.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;下一篇：Android集成微信支付功能&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Android" scheme="http://dkylin.com/categories/Android/"/>
    
    
      <category term="Android" scheme="http://dkylin.com/tags/Android/"/>
    
      <category term="Alipay" scheme="http://dkylin.com/tags/Alipay/"/>
    
      <category term="移动支付" scheme="http://dkylin.com/tags/%E7%A7%BB%E5%8A%A8%E6%94%AF%E4%BB%98/"/>
    
  </entry>
  
  <entry>
    <title>Android常用工具汇总</title>
    <link href="http://dkylin.com/archives/2016/summary-address-of-android-common-tools.html"/>
    <id>http://dkylin.com/archives/2016/summary-address-of-android-common-tools.html</id>
    <published>2016-03-31T01:41:17.000Z</published>
    <updated>2017-04-01T03:46:22.000Z</updated>
    
    <content type="html"><![CDATA[<p>在日常开发中，总会遇到很多好用的开源库或是工具，在此记录下来，方便以后使用方便，本篇博客仅记录本人日常开发中常用的，或是个人觉得好用即将要学习的工具。本篇博客将持续更新。</p><a id="more"></a><blockquote><p>更新时间：2016-03-31</p></blockquote><h2 id="一、GitHub-Android-Libraries"><a href="#一、GitHub-Android-Libraries" class="headerlink" title="一、GitHub Android Libraries"></a>一、GitHub Android Libraries</h2><table><thead><tr><th>项目名称</th><th>项目简介</th></tr></thead><tbody><tr><td><a href="https://github.com/nostra13/Android-Universal-Image-Loader" target="_blank" rel="noopener">Android-Universal-Image-Loader</a></td><td>优秀的Android图片缓存库</td></tr><tr><td><a href="https://github.com/ReactiveX/RxJava" target="_blank" rel="noopener">RxJava</a></td><td>RxJava 是一个在 Java VM 上使用可观测的序列来组成异步的、基于事件的程序的库, 简单来说它就是一个实现异步操作的库，有点在于逻辑非常简洁。</td></tr><tr><td><a href="https://github.com/square/retrofit" target="_blank" rel="noopener">retrofit</a></td><td>Retrofit 是目前 Android 最流行的 Http Client 库之一, 目前版本是 Retrofit2.0 Beta4。</td></tr><tr><td><a href="https://github.com/square/okhttp" target="_blank" rel="noopener">okhttp</a></td><td>非常好用的网络请求库</td></tr><tr><td><a href="https://github.com/greenrobot/EventBus" target="_blank" rel="noopener">EventBus</a></td><td><a href="http://a.codekk.com/detail/Android/Trinea/EventBus%20%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90" target="_blank" rel="noopener">EventBus 源码解析</a></td></tr><tr><td><a href="https://github.com/excilys/androidannotations" target="_blank" rel="noopener">Android Annotations</a></td><td>使开发变得简单的注解。 <a href="http://a.codekk.com/detail/Android/Trinea/%E5%85%AC%E5%85%B1%E6%8A%80%E6%9C%AF%E7%82%B9%E4%B9%8B%20Java%20%E6%B3%A8%E8%A7%A3%20Annotation" target="_blank" rel="noopener">公共技术点之 Java 注解 Annotations</a></td></tr><tr><td><a href="https://github.com/navasmdc/MaterialDesignLibrary" target="_blank" rel="noopener">MaterialDesignLibrary</a></td><td>Material Design，超级棒的设计理念</td></tr><tr><td><a href="https://github.com/liaohuqiu/android-Ultra-Pull-To-Refresh" target="_blank" rel="noopener">Android-Ultra-Pull-To-Refresh</a></td><td><a href="http://a.codekk.com/detail/Android/Grumoon/android-Ultra-Pull-To-Refresh%20%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90" target="_blank" rel="noopener">android-Ultra-Pull-To-Refresh 源码解析</a></td></tr><tr><td><a href="https://github.com/wyouflf/xUtils" target="_blank" rel="noopener">xUtils</a></td><td><a href="http://a.codekk.com/detail/Android/Caij/xUtils%20%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90" target="_blank" rel="noopener">xUtils 源码解析</a></td></tr><tr><td><a href="https://github.com/mcxiaoke/android-volley" target="_blank" rel="noopener">Android-Volley</a></td><td><a href="http://a.codekk.com/detail/Android/grumoon/Volley%20%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90" target="_blank" rel="noopener">Volley源码解析</a></td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在日常开发中，总会遇到很多好用的开源库或是工具，在此记录下来，方便以后使用方便，本篇博客仅记录本人日常开发中常用的，或是个人觉得好用即将要学习的工具。本篇博客将持续更新。&lt;/p&gt;
    
    </summary>
    
      <category term="Android" scheme="http://dkylin.com/categories/Android/"/>
    
    
      <category term="Android" scheme="http://dkylin.com/tags/Android/"/>
    
      <category term="Android tools" scheme="http://dkylin.com/tags/Android-tools/"/>
    
      <category term="开源库" scheme="http://dkylin.com/tags/%E5%BC%80%E6%BA%90%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>设计模式之六大设计原则</title>
    <link href="http://dkylin.com/archives/2016/design-pattern-six-design-principle.html"/>
    <id>http://dkylin.com/archives/2016/design-pattern-six-design-principle.html</id>
    <published>2016-03-17T05:20:53.000Z</published>
    <updated>2016-07-31T14:53:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>很久之前就听说过设计模式的大名，但是一直没有集中精力完整的去学习设计模式，最近打算完整的学习一下设计模式，并把学习的收获及心得记录下来。本篇博客主要内容为：设计模式的六大设计原则。</p><a id="more"></a><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/image%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%2FDesign-Pattem-MindMap.png" alt="Design-Pattem-MindMap"></p><h2 id="一、概述"><a href="#一、概述" class="headerlink" title="一、概述"></a>一、概述</h2><p>设计模式（Design pattern）是一套被反复使用、多数人知晓的、经过分类编目的、代码设计经验的总结。使用设计模式是为了可重用代码、让代码更容易被他人理解、保证代码可靠性。 毫无疑问，设计模式于己于他人于系统都是多赢的；设计模式使代码编制真正工程化；设计模式是软件工程的基石脉络，如同大厦的结构一样。</p><p>而<strong>设计原则</strong>则是设计模式所遵循的规则，设计模式就是实现了这些原则，从而达到了代码复用、增加可维护性的目的。</p><h2 id="二、六大设计原则"><a href="#二、六大设计原则" class="headerlink" title="二、六大设计原则"></a>二、六大设计原则</h2><h3 id="2-1-单一职责原则-Single-Responsibility-Principle-SRP"><a href="#2-1-单一职责原则-Single-Responsibility-Principle-SRP" class="headerlink" title="2.1 单一职责原则(Single Responsibility Principle - SRP)"></a>2.1 单一职责原则(Single Responsibility Principle - SRP)</h3><p>一个类，只有一个引起它变化的原因。应该只有一个职责。每一个职责都是变化的一个轴线，如果一个类有一个以上的职责，这些职责就耦合在了一起。这会导致脆弱的设计。当一个职责发生变化时，可能会影响其它的职责。另外，多个职责耦合在一起，会影响复用性。例如：要实现逻辑和界面的分离。</p><h3 id="2-2-开放封闭原则-Open-Closed-Principle-OCP"><a href="#2-2-开放封闭原则-Open-Closed-Principle-OCP" class="headerlink" title="2.2 开放封闭原则(Open Closed Principle - OCP)"></a>2.2 开放封闭原则(Open Closed Principle - OCP)</h3><p>软件实体应该是可扩展，而不可修改的。也就是说，<strong>对扩展是开放的，而对修改是封闭的</strong>。<br><strong>对扩展开放</strong>，意味着有新的需求或变化时，可以对现有代码进行扩展，以适应新的情况。<br><strong>对修改封闭</strong>，意味着类一旦设计完成，就可以独立完成其工作，而不要对类进行任何修改。<br>封装变化，是实现开放封闭原则的重要手段，对于经常发生变化的状态一般将其封装为一个抽象。<br>拒绝滥用抽象，只将经常变化的部分进行抽象，这种经验可以从设计模式的学习与应用中获得。</p><h3 id="2-3-里氏替换原则-Liskov-Substitution-Principle-LSP"><a href="#2-3-里氏替换原则-Liskov-Substitution-Principle-LSP" class="headerlink" title="2.3 里氏替换原则(Liskov Substitution Principle - LSP)"></a>2.3 里氏替换原则(Liskov Substitution Principle - LSP)</h3><p>里氏替换原则通俗的来讲就是：<strong>子类可以扩展父类的功能，但不能改变父类原有的功能</strong>。它包含以下4层含义：</p><blockquote><ol><li>子类可以实现父类的抽象方法，但不能覆盖父类的非抽象方法。</li><li>子类中可以增加自己特有的方法。</li><li>当子类的方法重载父类的方法时，方法的前置条件（即方法的形参）要比父类方法的输入参数更宽松。</li><li>当子类的方法实现父类的抽象方法时，方法的后置条件（即方法的返回值）要比父类更严格。</li></ol></blockquote><h3 id="2-4-最少知识原则-Least-Knowledge-Principle-LKP"><a href="#2-4-最少知识原则-Least-Knowledge-Principle-LKP" class="headerlink" title="2.4 最少知识原则(Least Knowledge Principle - LKP)"></a>2.4 最少知识原则(Least Knowledge Principle - LKP)</h3><p>最少知识原则又叫<strong>迪米特法则</strong>。核心思想是：<strong>低耦合、高内聚</strong><br>一个实体应当尽量少的与其他实体之间发生相互作用，使得系统功能模块相对独立。也就是说一个软件实体应当尽可能少的与其他实体发生相互作用。这样，当一个模块修改时，就会尽量少的影响其他的模块，扩展会相对容易，这是对软件实体之间通信的限制，它要求限制软件实体之间通信的宽度和深度。</p><h3 id="2-5-接口隔离原则-Interface-Segregation-Principle-ISP"><a href="#2-5-接口隔离原则-Interface-Segregation-Principle-ISP" class="headerlink" title="2.5 接口隔离原则(Interface Segregation Principle - ISP)"></a>2.5 接口隔离原则(Interface Segregation Principle - ISP)</h3><p>接口隔离原则的含义是：<strong>建立单一接口，不要建立庞大臃肿的接口，尽量细化接口，接口中的方法尽量少</strong>。<br>采用接口隔离原则对接口进行约束时，要注意以下几点：</p><blockquote><ol><li>接口尽量小，但是要有限度。对接口进行细化可以提高程序设计灵活性是不挣的事实，但是如果过小，则会造成接口数量过多，使设计复杂化。所以一定要适度。</li><li>为依赖接口的类定制服务，只暴露给调用的类它需要的方法，它不需要的方法则隐藏起来。只有专注地为一个模块提供定制服务，才能建立最小的依赖关系。</li><li>提高内聚，减少对外交互。使接口用最少的方法去完成最多的事情。</li></ol></blockquote><h3 id="2-6-依赖倒置原则-Dependence-Inversion-Principle-DIP"><a href="#2-6-依赖倒置原则-Dependence-Inversion-Principle-DIP" class="headerlink" title="2.6 依赖倒置原则(Dependence Inversion Principle - DIP)"></a>2.6 依赖倒置原则(Dependence Inversion Principle - DIP)</h3><p>依赖倒置原则的核心思想是<strong>面向接口编程</strong>，不应该面向实现类编程。<br>在实际编程中，要做到下面3点：</p><blockquote><ol><li>低层模块尽量都要有抽象类或接口，或者两者都有。</li><li>变量的声明类型尽量是抽象类或接口。</li><li>使用继承时遵循里氏替换原则。</li></ol></blockquote><h2 id="三、其他设计原则"><a href="#三、其他设计原则" class="headerlink" title="三、其他设计原则"></a>三、其他设计原则</h2><p>除了以上六大设计原则之外。还有一些其他的设计原则，下面只做简单介绍，</p><h3 id="3-1-组合-聚合复用原则（Composition-Aggregation-Reuse-Principle-CARP）"><a href="#3-1-组合-聚合复用原则（Composition-Aggregation-Reuse-Principle-CARP）" class="headerlink" title="3.1 组合/聚合复用原则（Composition/Aggregation Reuse Principle - CARP）"></a>3.1 组合/聚合复用原则（Composition/Aggregation Reuse Principle - CARP）</h3><p>当要扩展类的功能时，优先考虑使用组合，而不是继承。这条原则在 23 种经典设计模式中频繁使用，如：代理模式、装饰模式、适配器模式等。可见江湖地位非常之高！<br>这也是面向对象中的一个<strong>重要原则</strong>。</p><h3 id="3-2-无环依赖原则（Acyclic-Dependencies-Principle-ADP）"><a href="#3-2-无环依赖原则（Acyclic-Dependencies-Principle-ADP）" class="headerlink" title="3.2 无环依赖原则（Acyclic Dependencies Principle - ADP）"></a>3.2 无环依赖原则（Acyclic Dependencies Principle - ADP）</h3><p>当 A 模块依赖于 B 模块，B 模块依赖于 C 模块，C 依赖于 A 模块，此时将出现循环依赖。在设计中应该避免这个问题，可通过引入“中介者模式”解决该问题。</p><h3 id="3-3-共同封装原则（Common-Closure-Principle-CCP）"><a href="#3-3-共同封装原则（Common-Closure-Principle-CCP）" class="headerlink" title="3.3 共同封装原则（Common Closure Principle - CCP）"></a>3.3 共同封装原则（Common Closure Principle - CCP）</h3><p>应该将易变的类放在同一个包里，将变化隔离出来。该原则是“开放-封闭原则”的延生。</p><h3 id="3-4-共同重用原则（Common-Reuse-Principle-CRP）"><a href="#3-4-共同重用原则（Common-Reuse-Principle-CRP）" class="headerlink" title="3.4 共同重用原则（Common Reuse Principle - CRP）"></a>3.4 共同重用原则（Common Reuse Principle - CRP）</h3><p>如果重用了包中的一个类，那么也就相当于重用了包中的所有类，我们要尽可能减小包的大小。</p><h3 id="3-5-好莱坞原则（Hollywood-Principle-HP）"><a href="#3-5-好莱坞原则（Hollywood-Principle-HP）" class="headerlink" title="3.5 好莱坞原则（Hollywood Principle - HP）"></a>3.5 好莱坞原则（Hollywood Principle - HP）</h3><p>好莱坞明星的经纪人一般都很忙，他们不想被打扰，往往会说：Don’t call me, I’ll call you. 翻译为：不要联系我，我会联系你。对应于软件设计而言，最著名的就是“控制反转”（或称为“依赖注入”），我们不需要在代码中主动的创建对象，而是由容器帮我们来创建并管理这些对象。</p><h3 id="3-6-不要重复你自己（Don’t-repeat-yourself-DRY）"><a href="#3-6-不要重复你自己（Don’t-repeat-yourself-DRY）" class="headerlink" title="3.6 不要重复你自己（Don’t repeat yourself - DRY）"></a>3.6 不要重复你自己（Don’t repeat yourself - DRY）</h3><p>不要让重复的代码到处都是，要让它们足够的重用，所以要尽可能地封装。</p><h3 id="3-7-保持它简单与傻瓜（Keep-it-simple-and-stupid-KISS）"><a href="#3-7-保持它简单与傻瓜（Keep-it-simple-and-stupid-KISS）" class="headerlink" title="3.7 保持它简单与傻瓜（Keep it simple and stupid - KISS）"></a>3.7 保持它简单与傻瓜（Keep it simple and stupid - KISS）</h3><p>不要让系统变得复杂，界面简洁，功能实用，操作方便，要让它足够的简单，足够的傻瓜。</p><h3 id="3-8-高内聚与低耦合（High-Cohesion-and-Low-Coupling-HCLC）"><a href="#3-8-高内聚与低耦合（High-Cohesion-and-Low-Coupling-HCLC）" class="headerlink" title="3.8 高内聚与低耦合（High Cohesion and Low Coupling - HCLC）"></a>3.8 高内聚与低耦合（High Cohesion and Low Coupling - HCLC）</h3><p>模块内部需要做到内聚度高，模块之间需要做到耦合度低。</p><h3 id="3-9-惯例优于配置（Convention-over-Configuration-COC）"><a href="#3-9-惯例优于配置（Convention-over-Configuration-COC）" class="headerlink" title="3.9 惯例优于配置（Convention over Configuration - COC）"></a>3.9 惯例优于配置（Convention over Configuration - COC）</h3><p>尽量让惯例来减少配置，这样才能提高开发效率，尽量做到“零配置”。很多开发框架都是这样做的。</p><h3 id="3-10-命令查询分离（Command-Query-Separation-CQS）"><a href="#3-10-命令查询分离（Command-Query-Separation-CQS）" class="headerlink" title="3.10 命令查询分离（Command Query Separation - CQS）"></a>3.10 命令查询分离（Command Query Separation - CQS）</h3><p>在定义接口时，要做到哪些是命令，哪些是查询，要将它们分离，而不要揉到一起。</p><h3 id="3-11-关注点分离（Separation-of-Concerns-SOC）"><a href="#3-11-关注点分离（Separation-of-Concerns-SOC）" class="headerlink" title="3.11 关注点分离（Separation of Concerns - SOC）"></a>3.11 关注点分离（Separation of Concerns - SOC）</h3><p>将一个复杂的问题分离为多个简单的问题，然后逐个解决这些简单的问题，那么这个复杂的问题就解决了。难就难在如何进行分离。</p><h3 id="3-12-契约式设计（Design-by-Contract-DBC）"><a href="#3-12-契约式设计（Design-by-Contract-DBC）" class="headerlink" title="3.12 契约式设计（Design by Contract - DBC）"></a>3.12 契约式设计（Design by Contract - DBC）</h3><p>模块或系统之间的交互，都是基于契约（接口或抽象）的，而不要依赖于具体实现。该原则建议我们要面向契约编程。</p><h3 id="3-13-你不需要它（You-aren’t-gonna-need-it-YAGNI）"><a href="#3-13-你不需要它（You-aren’t-gonna-need-it-YAGNI）" class="headerlink" title="3.13 你不需要它（You aren’t gonna need it - YAGNI）"></a>3.13 你不需要它（You aren’t gonna need it - YAGNI）</h3><p>不要一开始就把系统设计得非常复杂，不要陷入“过度设计”的深渊。应该让系统足够的简单，而却又不失扩展性，这是其中的难点。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;很久之前就听说过设计模式的大名，但是一直没有集中精力完整的去学习设计模式，最近打算完整的学习一下设计模式，并把学习的收获及心得记录下来。本篇博客主要内容为：设计模式的六大设计原则。&lt;/p&gt;
    
    </summary>
    
      <category term="设计模式" scheme="http://dkylin.com/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
      <category term="设计模式" scheme="http://dkylin.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
      <category term="设计原则" scheme="http://dkylin.com/tags/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/"/>
    
      <category term="Java" scheme="http://dkylin.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>优质软件及资源整理</title>
    <link href="http://dkylin.com/archives/2016/quality-software-and-resource.html"/>
    <id>http://dkylin.com/archives/2016/quality-software-and-resource.html</id>
    <published>2016-03-15T01:13:28.000Z</published>
    <updated>2016-03-15T01:13:28.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://img.blog.csdn.net/20160227141556938" alt="Programmer"></p><p>博主是个Android程序员，在学习工作中经常会遇到一些优质的软件、网站、博客、资源等等。但是可能长时间不用之后就会忘记曾经有一个工具非常好用，但是就是记不起来叫什么，在哪下载了。所以博主想要把自己在学习工作中所使用过的一些比较好的资源在本篇博客中记载下来，为了自己不会忘记，也分享给所有需要的人们。同时本篇博客将一直更新，不断填充优质资源。</p><blockquote><p>更新时间：2016-03-07</p></blockquote><hr><h2 id="一、Windows-软件篇"><a href="#一、Windows-软件篇" class="headerlink" title="一、Windows 软件篇"></a>一、Windows 软件篇</h2><h3 id="1-1-Google-Chrome"><a href="#1-1-Google-Chrome" class="headerlink" title="1.1 Google Chrome"></a><a href="https://www.google.com/chrome/browser/desktop/index.html" target="_blank" rel="noopener">1.1 Google Chrome</a></h3><p>开发人员必备的浏览器，我的默认浏览器就是它，不多说了。后面会更新一些Chrome浏览器中比较好用的插件及应用，可以更好的使用Chrome，更好的做开发。</p><p><img src="http://img.blog.csdn.net/20160227144446010" alt="Google Chrome"></p><h3 id="1-2-Mozilla-Firefox"><a href="#1-2-Mozilla-Firefox" class="headerlink" title="1.2 Mozilla Firefox"></a><a href="http://www.firefox.com.cn" target="_blank" rel="noopener">1.2 Mozilla Firefox</a></h3><p>和上面的Google Chrome浏览器一样，开发人员必备的浏览器之一，有很多好用的插件，而且插件安装非常方便。</p><p><img src="http://img.blog.csdn.net/20160227150045185" alt="Mozilla Firefox"></p><h3 id="1-3-Microsoft-Office-2013"><a href="#1-3-Microsoft-Office-2013" class="headerlink" title="1.3 Microsoft Office 2013"></a><a href="http://www.itellyou.cn/" target="_blank" rel="noopener">1.3 Microsoft Office 2013</a></h3><p>平时学习工作都需要用到的办公套件，我现在用的版本就是2013的，界面更加美观，交互设计做的更加人性化，低版本的还有2010、2007、2003，不过在保存文件的时候可以选择保存成更低版本的2003的.doc文件，以免不兼容，毕竟现在还有很多都在用低版本的Office。Office是需要激活的，可以网上搜索激活软件或者激活码激活。WPS做的很不错，但是不建议使用，还是比较建议官方版本Office。</p><p><img src="http://img.blog.csdn.net/20160227151428521" alt="Microsoft Office 2013"></p><h3 id="1-4-360-Total-Security"><a href="#1-4-360-Total-Security" class="headerlink" title="1.4 360 Total Security"></a><a href="https://www.360totalsecurity.com" target="_blank" rel="noopener">1.4 360 Total Security</a></h3><p>360安全卫士国际版，表示这是我用的唯一一款360的产品。毋庸置疑，360在安全方面实力很强，但是使用过360安全卫士的可能都感受到了浓浓的流氓气息了吧。所以我果断卸载了所有360的产品不再使用，直到这款360国际版的出现。简洁清爽的界面，简单实用的操作，更适合我的使用。最近手机也下载安装了360 Total Security，Android版的APP使用Material Design设计理念进行设计，作为Android开发工程师，因为它的界面设计它将常驻我的手机，对设计有兴趣的小伙伴们可以下载看看。</p><p><img src="http://img.blog.csdn.net/20160227154644137" alt="360 Total Security"></p><h3 id="1-5-WinRAR解压软件"><a href="#1-5-WinRAR解压软件" class="headerlink" title="1.5 WinRAR解压软件"></a><a href="http://www.winrar.com.cn" target="_blank" rel="noopener">1.5 WinRAR解压软件</a></h3><p>一款比较常用的解压软件，支持多种压缩格式，新版本的可能打开解压文件时会有广告弹出，老版本是没有的。除此之外其他方面都还是很不错的，也是我一直在用的解压软件。</p><p><img src="http://img.blog.csdn.net/20160227161054887" alt="WinRAR"></p><h3 id="1-6-Uninstall-Tools-软件卸载工具"><a href="#1-6-Uninstall-Tools-软件卸载工具" class="headerlink" title="1.6 Uninstall Tools 软件卸载工具"></a><a href="http://pan.baidu.com/s/1bwwOF0" target="_blank" rel="noopener">1.6 Uninstall Tools 软件卸载工具</a></h3><p>我一个朋友给我的一款软件卸载工具，在卸载完软件之后会清理残余文件以及注册表信息，卸载的非常干净，有一些软件，比如VMware，安装之后卸载，如果不手动清理注册表再次安装是会安装失败的。所以这款软件我非常喜欢。</p><p><img src="http://img.blog.csdn.net/20160227162822503" alt="Uninstall Tools"></p><h3 id="1-7-Prezi"><a href="#1-7-Prezi" class="headerlink" title="1.7 Prezi"></a><a href="https://prezi.com" target="_blank" rel="noopener">1.7 Prezi</a></h3><p>一款非常优秀的软件，可以用来制作非常炫酷的PPT、电子书等等。</p><p><img src="http://img.blog.csdn.net/20160227164106258" alt="Prezi"></p><h3 id="1-8-UltraISO"><a href="#1-8-UltraISO" class="headerlink" title="1.8 UltraISO"></a><a href="http://cn.ezbsystems.com/ultraiso/download.htm" target="_blank" rel="noopener">1.8 UltraISO</a></h3><p>UltraISO(软碟通)-一款ISO光盘刻录软件，搞计算机的经常要装各种系统，此软件必不可少。</p><p><img src="http://img.blog.csdn.net/20160227164904124" alt="UltraISO"></p><h3 id="1-9-EasyBCD"><a href="#1-9-EasyBCD" class="headerlink" title="1.9 EasyBCD"></a><a href="http://neosmart.net/EasyBCD" target="_blank" rel="noopener">1.9 EasyBCD</a></h3><p>做开发的小伙伴们有时可能需要装双系统，比如Windows+Ubuntu，这时候就需要EasyBCD编辑启动菜单了。</p><p><img src="http://img.blog.csdn.net/20160227165235081" alt="EasyBC"></p><h3 id="1-10-VMware-Workstation-Pro"><a href="#1-10-VMware-Workstation-Pro" class="headerlink" title="1.10 VMware Workstation Pro"></a><a href="https://www.vmware.com/cn" target="_blank" rel="noopener">1.10 VMware Workstation Pro</a></h3><p>做计算机经常需要折腾电脑，但是又怕电脑被折腾坏了，先不说重装费事，万一损坏了重要文件资料，感染恶意病毒木马就不好了。所有这时候虚拟机就派上用场了，你可以在虚拟机中随意折腾，而不用担心会影响物理机。VMware需要注册码，这里附上VMware Workstation 10及其注册机的下载链接：<a href="http://pan.baidu.com/s/1dDZVZ1Z" target="_blank" rel="noopener">点击下载</a>。想要最新的版本可以去官网下载，破解方法自己Google。</p><p><img src="http://img.blog.csdn.net/20160227170500831" alt="VMware"></p><h3 id="1-11-VirtualBox"><a href="#1-11-VirtualBox" class="headerlink" title="1.11 VirtualBox"></a><a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="noopener">1.11 VirtualBox</a></h3><p>和VMware一样是一个虚拟机软件，VirtualBox更轻量级，但是个人感觉没有VMware功能强大。个人比较喜欢VMware。电脑配置不是很好的推荐使用VirtualBox，配置比较好的推荐使用VMware。</p><p><img src="http://img.blog.csdn.net/20160227171005818" alt="VirtualBox"></p><h3 id="1-12-Haroopad-Markdown编辑器"><a href="#1-12-Haroopad-Markdown编辑器" class="headerlink" title="1.12 Haroopad-Markdown编辑器"></a><a href="http://pad.haroopress.com" target="_blank" rel="noopener">1.12 Haroopad-Markdown编辑器</a></h3><p>桌面版的Markdown编辑器</p><p><img src="http://img.blog.csdn.net/20160227173744812" alt="Haroopad"></p><h2 id="二、网站篇"><a href="#二、网站篇" class="headerlink" title="二、网站篇"></a>二、网站篇</h2><blockquote><p>待更新…</p></blockquote><h2 id="三、开发工具篇"><a href="#三、开发工具篇" class="headerlink" title="三、开发工具篇"></a>三、开发工具篇</h2><blockquote><p>待更新…</p></blockquote><h2 id="四、Linux工具篇"><a href="#四、Linux工具篇" class="headerlink" title="四、Linux工具篇"></a>四、Linux工具篇</h2><blockquote><p>待更新…</p></blockquote><h2 id="五、Google-Chrome插件篇"><a href="#五、Google-Chrome插件篇" class="headerlink" title="五、Google Chrome插件篇"></a>五、Google Chrome插件篇</h2><h3 id="5-1-马克飞象"><a href="#5-1-马克飞象" class="headerlink" title="5.1 马克飞象"></a><a href="https://chrome.google.com/webstore/detail/marxico/kidnkfckhbdkfgbicccmdggmpgogehop?utm_source=chrome-ntp-icon" target="_blank" rel="noopener">5.1 马克飞象</a></h3><p>马克飞象是一款专为印象笔记（Evernote）打造的Markdown编辑器，通过精心的设计与技术实现，配合印象笔记强大的存储能力，带来前所未有的书写体验。</p><h3 id="5-2-Vysor"><a href="#5-2-Vysor" class="headerlink" title="5.2 Vysor"></a><a href="https://chrome.google.com/webstore/detail/vysor-beta/gidgenkbbabolejbgbpnhbimgjbffefm?utm_source=chrome-ntp-icon" target="_blank" rel="noopener">5.2 Vysor</a></h3><p>Vysor - 通过 USB 数据线在电脑上远程控制 。例如大家开发好app的雏形了，需要通过投影演示给大家看，通常的做法是使用Genymotion模拟器，相对google原生的模拟器虽然快了很多，但毕竟是模拟器，很多效果不能随心所欲的控制，有了Vysor我们可以直接操作手机，Vysor会把画面同步到电脑上，非常流畅，我们Android开发者再也不用羡慕iOS开发者使用Quick Time演示app的便利了。</p><h3 id="5-3-Postman"><a href="#5-3-Postman" class="headerlink" title="5.3 Postman"></a><a href="https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop?utm_source=chrome-ntp-icon" target="_blank" rel="noopener">5.3 Postman</a></h3><p>不管你是Web开发者还是Android者，在你的开发中不免会有各种Http请求、接口之类的。那么使用 Postman 插件可以非常方便的测试Http连接，Postman几乎支持所有的Http请求类型。开发必备！</p><h3 id="5-4-Octotree"><a href="#5-4-Octotree" class="headerlink" title="5.4 Octotree"></a><a href="https://chrome.google.com/webstore/detail/octotree/bkhaagjahfmjljalopjnoealnfndnagc?utm_source=chrome-ntp-icon" target="_blank" rel="noopener">5.4 Octotree</a></h3><p>Code tree for GitHub and GitLab。专为github和gitlab提供目录树。浏览的时候清晰明了多了~</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;http://img.blog.csdn.net/20160227141556938&quot; alt=&quot;Programmer&quot;&gt;&lt;/p&gt;&lt;p&gt;博主是个Android程序员，在学习工作中经常会遇到一些优质的软件、网站、博客、资源等等。但是可能长时间不用之后就会忘
      
    
    </summary>
    
      <category term="资源" scheme="http://dkylin.com/categories/%E8%B5%84%E6%BA%90/"/>
    
    
      <category term="资源" scheme="http://dkylin.com/tags/%E8%B5%84%E6%BA%90/"/>
    
  </entry>
  
  <entry>
    <title>Hexo搭建个人博客之进阶</title>
    <link href="http://dkylin.com/archives/2016/build-blog-by-hexo-advanced.html"/>
    <id>http://dkylin.com/archives/2016/build-blog-by-hexo-advanced.html</id>
    <published>2016-03-08T01:13:28.000Z</published>
    <updated>2017-01-06T07:11:28.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ooo.0o0.ooo/2017/04/01/58df20d0b8f4f.png" alt="Hexo.png"></p><blockquote><p>待写…</p></blockquote><a id="more"></a>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/04/01/58df20d0b8f4f.png&quot; alt=&quot;Hexo.png&quot;&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;待写…&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Hexo" scheme="http://dkylin.com/categories/Hexo/"/>
    
    
      <category term="Hexo" scheme="http://dkylin.com/tags/Hexo/"/>
    
      <category term="Git" scheme="http://dkylin.com/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Hexo搭建个人博客之基础篇</title>
    <link href="http://dkylin.com/archives/2016/build-blog-by-hexo-based.html"/>
    <id>http://dkylin.com/archives/2016/build-blog-by-hexo-based.html</id>
    <published>2016-03-08T01:13:28.000Z</published>
    <updated>2017-12-29T07:11:28.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://ooo.0o0.ooo/2017/04/01/58df20d0b8f4f.png" alt="Hexo.png"></p><p>最近想搭建一个独立的个人博客，可以将自己在工作学习中的一些知识及经验记录下来。不断积累知识，不断总结经验，让自己可以不断的进步、成长。同时也将自己的经历、知识分享给其他人。</p><a id="more"></a><p>目前搭建独立的个人博客有很多种方式，你可以选择购买主机搭建动态博客 - <a href="https://wordpress.org" target="_blank" rel="noopener">WordPress</a>等，也可以使用<a href="https://pages.github.com" target="_blank" rel="noopener">Github Pages</a>来搭建一个静态的个人博客。我选择了现在很热门的<a href="https://pages.github.com" target="_blank" rel="noopener">Github Pages</a> + <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 的方式来搭建独立的个人博客。</p><h2 id="一、前期准备"><a href="#一、前期准备" class="headerlink" title="一、前期准备"></a>一、前期准备</h2><h3 id="1-1-相关网站"><a href="#1-1-相关网站" class="headerlink" title="1.1 相关网站"></a>1.1 相关网站</h3><p>在搭建个人博客的过程中，你可能会使用到下面几个网站。在这几个网站中都有相应的官方文档及教程。如果官方文档不能满足你，那么请<a href="https://www.google.com" target="_blank" rel="noopener">Google</a>。</p><p><a href="https://github.com" target="_blank" rel="noopener">Github 官网</a><br><a href="https://pages.github.com" target="_blank" rel="noopener">Github Pages</a><br><a href="https://hexo.io" target="_blank" rel="noopener">Hexo 官网</a><br><a href="https://nodejs.org" target="_blank" rel="noopener">Node.js 官网</a><br><a href="https://git-scm.com" target="_blank" rel="noopener">Git 官网</a></p><blockquote><p>一般来说官方文档是我们学习过程中最好最权威的资料，但是这里我将会把自己的经验与体会记录、分享给大家。</p></blockquote><h2 id="二、搭建Git环境"><a href="#二、搭建Git环境" class="headerlink" title="二、搭建Git环境"></a>二、搭建Git环境</h2><h3 id="2-1-注册Github"><a href="#2-1-注册Github" class="headerlink" title="2.1 注册Github"></a>2.1 注册Github</h3><p>进入<a href="https://github.com" target="_blank" rel="noopener">Github 网站</a>，按照提示进行注册，然后登录。</p><p><img src="https://ooo.0o0.ooo/2017/04/01/58df21d2e7553.png" alt="Github_signup.png"></p><p>登录完成之后，在你的主页点击图标<a href="https://github.com/new" target="_blank" rel="noopener"> New Repository </a>创建一个新的版本库，因为我们是使用<a href="https://pages.github.com" target="_blank" rel="noopener"> Github Pages </a>去搭建我们的静态博客，所以版本库的名称应该是你的用户名+.github.io。如：我的用户名是：dkylin，那么版本库的名字应该是：<a href="https://github.com/dkylin/dkylin.github.io" target="_blank" rel="noopener"> dkylin.github.io </a>，这个是一定不能出错的。因为之后你将要访问的你的博客地址就是：<a href="https://dkylin.github.io" target="_blank" rel="noopener"> https://dkylin.github.io </a>。</p><p><img src="https://ooo.0o0.ooo/2017/04/01/58df220bdb968.png" alt="Github_createRepo.png"></p><p>至此，Github账号创建完成，Github Pages 所需要的版本库就创建好了。</p><h3 id="2-2-本地安装Git"><a href="#2-2-本地安装Git" class="headerlink" title="2.2 本地安装Git"></a>2.2 本地安装Git</h3><p>进入<a href="https://git-scm.com" target="_blank" rel="noopener"> Git 官网</a>，下载最新的 Git 软件版本，下载完成之后按照引导安装 Git 。安装完成之后在开始菜单中及桌面会有一个 Git Bash。这是一个类似于Liunx的终端，在里面可以使用命令进行一些操作。</p><blockquote><p>需要区分的是：Git ≠ Github。Git是一个版本控制工具（软件）；Github是一个用Git做版本控制的项目托管平台（平台）。</p></blockquote><h3 id="2-3-配置SSH"><a href="#2-3-配置SSH" class="headerlink" title="2.3 配置SSH"></a>2.3 配置SSH</h3><p>打开 Git Bash ，执行下面的命令生成 SSH 访问私钥及公钥。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C <span class="string">"email@email.com"</span></span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2017/12/29/5a45edc0e1d4a.png" alt="ssh.png"></p><p>输入命令回车之后会提示你输入一些东西，不用管。一直回车到底就好了。然后你的 <code>~/.ssh</code> 文件下就会生成两个文件 <code>id_rsa</code> 和 <code>id_rsa.pub</code> 。</p><p>打开你的 Github -&gt; setting -&gt; SSH and GPG Keys 。然后点击 <code>New SSH Key</code> 创建一个新的SSH Key。<code>Title</code> 可以用你的计算机名，可以用以区分。将文件 <code>id_rsa.pub</code> 中的所以内容复制粘贴到 <code>Key</code> 下面。</p><p><img src="https://i.loli.net/2017/12/29/5a45eebad6ed6.png" alt="ssh-key.png"></p><p>然后使用下面的命令测试是否可以连接上 Github 。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -T git@github.com</span><br></pre></td></tr></table></figure><p>如果出现下图所示<code>You&#39;ve successfully authenticated</code>内容则证明通过验证，连接成功。</p><p><img src="http://7xrnl9.com1.z0.glb.clouddn.com/ssh-T.png" alt="ssh-T.png"></p><h2 id="三、安装Hexo"><a href="#三、安装Hexo" class="headerlink" title="三、安装Hexo"></a>三、安装Hexo</h2><p>Hexo的安装在其<a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">官方文档</a>中有很详细的说明。下面将简单介绍Hexo的安装。</p><h3 id="3-1-安装前提"><a href="#3-1-安装前提" class="headerlink" title="3.1 安装前提"></a>3.1 安装前提</h3><ul><li>安装<a href="https://nodejs.org" target="_blank" rel="noopener"> Node.js </a>，请进入Node.js 的官网下载安装。</li><li>安装<a href="http://git-scm.com" target="_blank" rel="noopener"> Git </a>，前面已经说明，不再赘述。</li></ul><h3 id="3-2-安装Hexo"><a href="#3-2-安装Hexo" class="headerlink" title="3.2 安装Hexo"></a>3.2 安装Hexo</h3><p>上面两个工具安装完整之后，打开 <code>Git Bash</code> ，只需要使用npm即可完成Hexo的安装。</p><blockquote><p>PS：如果在操作过程中，出现错误或者Error，请检查网络，然后使用管理员权限打开Git Bash。</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>安装Hexo完成之后，执行下面的命令，Hexo将会在你指定的文件夹中下载所需要的文件。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init &lt;folder&gt;</span><br><span class="line">$ cd &lt;folder&gt;</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure><p>下载完成后，文件夹下的目录如下：<br></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── _config.yml</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── source</span><br><span class="line">|   ├── _drafts</span><br><span class="line">|   └── _posts</span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure><p></p><ul><li><strong>_config.yml</strong> 文件是网站的配置文件，可以在其中配置网站的大部分参数。</li><li><strong>package.json</strong> 文件是应用程序或插件的信息列表。</li><li><strong>source</strong> 是资源文件夹，是用来存放用户资源的地方，比如你写的文章，自定义图片等。</li><li><strong>themes</strong> 是<a href="https://hexo.io/themes" target="_blank" rel="noopener">主题</a>文件夹，Hexo会根据不同主题来生成不同的静态页面。</li><li><strong>scaffolds</strong> 是模板件夹，当新建文章的时候，Hexo会根据模板来建立初始文件。</li></ul><h3 id="3-3-修改主题"><a href="#3-3-修改主题" class="headerlink" title="3.3 修改主题"></a>3.3 修改主题</h3><p>我使用的是NexT主题，下面只介绍怎么安装配置这种主题，其他主题可以在<a href="https://hexo.io/themes" target="_blank" rel="noopener">Hexo Themes</a>、github里面寻找。</p><p>先进入你的Hexo文件夹。然后使用下面的命令<code>clone</code>下载<code>NexT</code>主题。<br></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone https://github.com/iissnan/hexo-theme-next.git themes/next</span><br></pre></td></tr></table></figure><p></p><p>然后打开Hexo主文件夹下的 <strong>_config.yml</strong>，修改其中的<code>theme</code> 属性。<code>theme:</code> 后面要加空格。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: next</span><br></pre></td></tr></table></figure><h3 id="3-4-本地查看调试"><a href="#3-4-本地查看调试" class="headerlink" title="3.4 本地查看调试"></a>3.4 本地查看调试</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g <span class="comment">#生成静态页面，生成的内容在public文件夹下</span></span><br><span class="line">$ hexo s <span class="comment">#启动本地服务，进行文章预览调试。hexo s --debug 命令可以用来调试</span></span><br></pre></td></tr></table></figure><h3 id="3-5-同步Hexo"><a href="#3-5-同步Hexo" class="headerlink" title="3.5 同步Hexo"></a>3.5 同步Hexo</h3><p>如果你想在不同的机器上使用你的Hexo进行博客更新，比如公司电脑、家庭电脑、笔记本。那么也许你需要将你配置好的Hexo同步到Github上，这样你每次更换电脑时，只需要进行简单的配置，然后同步Github上的Hexo配置即可使用，可以节省大量的时间。</p><p>但是此时我们需要注意的是，我们的主题是单独的版本库，所以我们需要在git的忽略文件中将<code>themes</code>文件夹添加进去，避免在提交Hexo文件配置时上传Theme主题文件。</p><p>打开Hexo主目录下的<code>.gitignore</code>文件，添加一行<code>themes/</code>内容，文件的最终内容如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line">db.json</span><br><span class="line">*.log</span><br><span class="line">node_modules/</span><br><span class="line">public/</span><br><span class="line">.deploy*/</span><br><span class="line">themes/</span><br></pre></td></tr></table></figure><p>这样你就可以放心的提交你的Hexo更新的内容而不会将Theme文件提交上去。</p><h3 id="3-6-部署到Github-Pages"><a href="#3-6-部署到Github-Pages" class="headerlink" title="3.6 部署到Github Pages"></a>3.6 部署到Github Pages</h3><p>先使用下面的命令对Git进行初始配置。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name <span class="string">"your name"</span></span><br><span class="line">$ git config --global user.email <span class="string">"email@email.com"</span></span><br></pre></td></tr></table></figure><p>然后打开Hexo主文件夹下的 <strong>_config.yml</strong>，设置其中的<code>deploy</code> 参数，详细请查看Hexo官方文档中<a href="https://hexo.io/zh-cn/docs/deployment.html" target="_blank" rel="noopener">部署部分</a>。</p><p>我的设置如下所示：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: ssh://git@github.com/dkylin/dkylin.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>git地址建议使用SSH地址。在上面的参数设置好了之后，使用下面的命令安装<a href="https://github.com/hexojs/hexo-deployer-git" target="_blank" rel="noopener"> hexo-deployer-git </a>插件，只有安装了插件之后才可以部署到Github Pages。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>安装完插件之后使用下面的命令进行部署：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g <span class="comment">#生成静态文件</span></span><br><span class="line">$ hexo d <span class="comment">#部署到github</span></span><br></pre></td></tr></table></figure><p>还有一个更快捷的命令：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo d -g <span class="comment">#在部署前先生成</span></span><br></pre></td></tr></table></figure><h3 id="3-7-NexT-主题拓展"><a href="#3-7-NexT-主题拓展" class="headerlink" title="3.7 NexT 主题拓展"></a>3.7 NexT 主题拓展</h3><p><a href="http://theme-next.iissnan.com/" target="_blank" rel="noopener">NexT 文档 </a>- NexT的详细配置可以在这里查看。</p><p><a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">NexT Github 地址</a> - 想要二次开发，可以Fork一下。</p><h2 id="四、Hexo常用命令"><a href="#四、Hexo常用命令" class="headerlink" title="四、Hexo常用命令"></a>四、Hexo常用命令</h2><p>下面仅列出几种常用的命令。更详细的命令请查看<a href="https://hexo.io/zh-cn/docs/commands.html" target="_blank" rel="noopener">Hexo官方文档</a>。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean <span class="comment">#清理之前生成的内容，即public文件</span></span><br><span class="line">$ hexo g <span class="comment">#生成静态文件</span></span><br><span class="line">$ hexo d <span class="comment">#部署</span></span><br><span class="line">$ hexo s <span class="comment">#启动本地服务，可以通过http://localhost:4000查看</span></span><br><span class="line">$ hexo s --debug <span class="comment">#使用debug模式启动服务</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://ooo.0o0.ooo/2017/04/01/58df20d0b8f4f.png&quot; alt=&quot;Hexo.png&quot;&gt;&lt;/p&gt;&lt;p&gt;最近想搭建一个独立的个人博客，可以将自己在工作学习中的一些知识及经验记录下来。不断积累知识，不断总结经验，让自己可以不断的进步、成长。同时也将自己的经历、知识分享给其他人。&lt;/p&gt;
    
    </summary>
    
      <category term="Hexo" scheme="http://dkylin.com/categories/Hexo/"/>
    
    
      <category term="Hexo" scheme="http://dkylin.com/tags/Hexo/"/>
    
      <category term="Git" scheme="http://dkylin.com/tags/Git/"/>
    
  </entry>
  
</feed>
